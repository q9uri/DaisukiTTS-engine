
# AivisSpeech Engine

[![Releases](https://img.shields.io/github/v/release/Aivis-Project/AivisSpeech-Engine?label=Release)](https://github.com/Aivis-Project/AivisSpeech-Engine/releases)
[![License: LGPL-3.0](https://img.shields.io/badge/License-LGPL3-blue.svg)](LICENSE)
[![CI: Build](https://github.com/Aivis-Project/AivisSpeech-Engine/actions/workflows/build-engine-package.yml/badge.svg)](https://github.com/Aivis-Project/AivisSpeech-Engine/actions/workflows/build-engine-package.yml)
[![CI: Test](https://github.com/Aivis-Project/AivisSpeech-Engine/actions/workflows/test.yml/badge.svg)](https://github.com/Aivis-Project/AivisSpeech-Engine/actions/workflows/test.yml)

ğŸ’  **AivisSpeech Engine:** **AI** **V**oice **I**mitation **S**ystem - Text to **Speech** **Engine**

-----

**AivisSpeech Engine ã¯ã€[VOICEVOX ENGINE](https://github.com/VOICEVOX/voicevox_engine) ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸã€æ—¥æœ¬èªéŸ³å£°åˆæˆã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚**  
æ—¥æœ¬èªéŸ³å£°åˆæˆã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã® [AivisSpeech](https://github.com/Aivis-Project/AivisSpeech) ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ãŠã‚Šã€ã‹ã‚“ãŸã‚“ã«æ„Ÿæƒ…è±Šã‹ãªéŸ³å£°ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

#### [ğŸ’  AivisSpeech ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://aivis-project.com/speech/) ï¼ [ğŸ’  AivisSpeech Engine ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/Aivis-Project/AivisSpeech-Engine/releases)

-----

<!-- no toc -->
- [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ–¹ã¸](#ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ–¹ã¸)
- [å‹•ä½œç’°å¢ƒ](#å‹•ä½œç’°å¢ƒ)
- [ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«](#ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«)
  - [å¯¾å¿œãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#å¯¾å¿œãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
  - [ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€](#ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€)
- [å°å…¥æ–¹æ³•](#å°å…¥æ–¹æ³•)
  - [Windows / macOS](#windows--macos)
  - [Linux](#linux)
  - [Linux + Docker](#linux--docker)
    - [CPU ã§å®Ÿè¡Œã™ã‚‹](#cpu-ã§å®Ÿè¡Œã™ã‚‹)
    - [NVIDIA GPU (CUDA) ã§å®Ÿè¡Œã™ã‚‹](#nvidia-gpu-cuda-ã§å®Ÿè¡Œã™ã‚‹)
- [éŸ³å£°åˆæˆ API ã‚’ä½¿ã†](#éŸ³å£°åˆæˆ-api-ã‚’ä½¿ã†)
- [VOICEVOX API ã¨ã®äº’æ›æ€§ã«ã¤ã„ã¦](#voicevox-api-ã¨ã®äº’æ›æ€§ã«ã¤ã„ã¦)
  - [AivisSpeech Engine ã«ãŠã‘ã‚‹ã‚¹ã‚¿ã‚¤ãƒ« ID](#aivisspeech-engine-ã«ãŠã‘ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«-id)
  - [`AudioQuery` å‹ã®ä»•æ§˜å¤‰æ›´](#audioquery-å‹ã®ä»•æ§˜å¤‰æ›´)
  - [`Mora` å‹ã®ä»•æ§˜å¤‰æ›´](#mora-å‹ã®ä»•æ§˜å¤‰æ›´)
  - [`Preset` å‹ã®ä»•æ§˜å¤‰æ›´](#preset-å‹ã®ä»•æ§˜å¤‰æ›´)
  - [AivisSpeech Engine ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ](#aivisspeech-engine-ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„-api-ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
  - [AivisSpeech Engine ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ API ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿](#aivisspeech-engine-ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„-api-ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿)
- [ã‚ˆãã‚ã‚‹è³ªå• / Q&A](#ã‚ˆãã‚ã‚‹è³ªå•--qa)
- [é–‹ç™ºæ–¹é‡](#é–‹ç™ºæ–¹é‡)
- [é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰](#é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰)
- [é–‹ç™º](#é–‹ç™º)
- [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹)

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ–¹ã¸

**AivisSpeech ã®ä½¿ã„æ–¹ã‚’ãŠæ¢ã—ã®æ–¹ã¯ã€[AivisSpeech å…¬å¼ã‚µã‚¤ãƒˆ](https://aivis-project.com/speech/) ã‚’ã”è¦§ãã ã•ã„ã€‚**

ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€ä¸»ã«é–‹ç™ºè€…å‘ã‘ã®æƒ…å ±ã‚’æ²è¼‰ã—ã¦ã„ã¾ã™ã€‚  
ä»¥ä¸‹ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ–¹å‘ã‘ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã€‚

- **[ä½¿ã„æ–¹](https://github.com/Aivis-Project/AivisSpeech/blob/master/public/howtouse.md)**
- **[ã‚ˆãã‚ã‚‹è³ªå• / Q&A](https://github.com/Aivis-Project/AivisSpeech/blob/master/public/qAndA.md)**
- **[ãŠå•ã„åˆã‚ã›](https://github.com/Aivis-Project/AivisSpeech/blob/master/public/contact.md)**

## å‹•ä½œç’°å¢ƒ

Windowsãƒ»macOSãƒ»Linux æ­è¼‰ã® PC ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚  
AivisSpeech Engine ã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã€PC ã« 1.5GB ä»¥ä¸Šã®ç©ºããƒ¡ãƒ¢ãƒª (RAM) ãŒå¿…è¦ã§ã™ã€‚

- **Windows:** Windows 10 (22H2 ä»¥é™)ãƒ»Windows 11  
- **macOS:** macOS 13 Ventura ä»¥é™
- **Linux:** Ubuntu 20.04 ä»¥é™

> [!TIP]
> ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã§ã‚ã‚‹ AivisSpeech ã¯ã€Windowsãƒ»macOS ã®ã¿ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ã€‚  
> ä¸€æ–¹ã€éŸ³å£°åˆæˆ API ã‚µãƒ¼ãƒãƒ¼ã§ã‚ã‚‹ AivisSpeech Engine ã¯ã€Ubuntu / Debian ç³»ã® Linux ã§ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚

> [!NOTE]
> Intel CPU æ­è¼‰ Mac ã§ã®å‹•ä½œã¯ç©æ¥µçš„ã«æ¤œè¨¼ã—ã¦ã„ã¾ã›ã‚“ã€‚  
> Intel CPU æ­è¼‰ Mac ã¯ã™ã§ã«è£½é€ ãŒçµ‚äº†ã—ã¦ãŠã‚Šã€æ¤œè¨¼ç’°å¢ƒã‚„ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã®ç”¨æ„è‡ªä½“ãŒé›£ã—ããªã£ã¦ãã¦ã„ã¾ã™ã€‚ãªã‚‹ã¹ã Apple Silicon æ­è¼‰ Mac ã§ã®åˆ©ç”¨ã‚’ãŠã™ã™ã‚ã„ãŸã—ã¾ã™ã€‚

> [!WARNING]
> Windows 10 ã§ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 22H2 ã§ã®å‹•ä½œç¢ºèªã®ã¿è¡Œã£ã¦ã„ã¾ã™ã€‚  
> **ã‚µãƒãƒ¼ãƒˆãŒçµ‚äº†ã—ãŸ Windows 10 ã®å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ LTSC (Long Term Servicing Channel) ç‰ˆã® Windows 10 ã§ã¯ã€AivisSpeech Engine ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—èµ·å‹•ã«å¤±æ•—ã™ã‚‹äº‹ä¾‹ãŒå ±å‘Šã•ã‚Œã¦ã„ã¾ã™ã€‚**  
> ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®è¦³ç‚¹ã‹ã‚‰ã‚‚ã€Windows 10 ç’°å¢ƒã®æ–¹ã¯ã€æœ€ä½é™ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 22H2 ã¾ã§æ›´æ–°ã—ã¦ã‹ã‚‰ã®åˆ©ç”¨ã‚’å¼·ããŠã™ã™ã‚ã„ãŸã—ã¾ã™ã€‚

## ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«

**AivisSpeech Engine ã¯ã€[AIVMX (**Ai**vis **V**oice **M**odel for ONN**X**)](https://github.com/Aivis-Project/aivmlib#aivmx-file-format-specification) (æ‹¡å¼µå­ `.aivmx`) ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚**

**AIVM** (**Ai**vis **V**oice **M**odel) / **AIVMX** (**Ai**vis **V**oice **M**odel for ONN**X**) ã¯ã€**å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ãƒ™ã‚¯ãƒˆãƒ«ãƒ»è©±è€…ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆåå‰ãƒ»æ¦‚è¦ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»ã‚¢ã‚¤ã‚³ãƒ³ãƒ»ãƒœã‚¤ã‚¹ã‚µãƒ³ãƒ—ãƒ« ãªã©ï¼‰ã‚’ 1 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚®ãƒ¥ãƒƒã¨ã¾ã¨ã‚ãŸã€AI éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ç”¨ã‚ªãƒ¼ãƒ—ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**ã§ã™ã€‚  

AIVM ä»•æ§˜ã‚„ AIVM / AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦ã®è©³ç´°ã¯ã€Aivis Project ã«ã¦ç­–å®šã—ãŸ **[AIVM ä»•æ§˜](https://github.com/Aivis-Project/aivmlib#aivm-specification)** ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

> [!NOTE]  
> **ã€ŒAIVMã€ã¯ã€AIVM / AIVMX ä¸¡æ–¹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä»•æ§˜ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»•æ§˜ã®ç·ç§°ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚**  
> å…·ä½“çš„ã«ã¯ã€AIVM ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ŒAIVM ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ãŸ Safetensors å½¢å¼ã€ã€AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ŒAIVM ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ãŸ ONNX å½¢å¼ã€ã®ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚  
> ã€ŒAIVM ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€ã¨ã¯ã€AIVM ä»•æ§˜ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã€å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã«ç´ã¥ãå„ç¨®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã“ã¨ã‚’ã„ã„ã¾ã™ã€‚

> [!IMPORTANT]  
> **AivisSpeech Engine ã¯ AIVM ä»•æ§˜ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹å®Ÿè£…ã§ã‚‚ã‚ã‚Šã¾ã™ãŒã€æ•¢ãˆã¦ AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹è¨­è¨ˆã¨ã—ã¦ã„ã¾ã™ã€‚**  
> ã“ã‚Œã«ã‚ˆã‚Šã€PyTorch ã¸ã®ä¾å­˜ã‚’æ’é™¤ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚µã‚¤ã‚ºã‚’å‰Šæ¸›ã—ã€ONNX Runtime ã«ã‚ˆã‚‹é«˜é€Ÿãª CPU æ¨è«–ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

> [!TIP]  
> **[AIVM Generator](https://aivm-generator.aivis-project.com/) ã‚’ä½¿ã†ã¨ã€æ—¢å­˜ã®éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ AIVM / AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ãŸã‚Šã€æ—¢å­˜ã® AIVM / AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç·¨é›†ã—ãŸã‚Šã§ãã¾ã™ï¼**

### å¯¾å¿œãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ä»¥ä¸‹ã®ãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã® AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

- `Style-Bert-VITS2`
- `Style-Bert-VITS2 (JP-Extra)`

> [!NOTE]
> AIVM ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ä»•æ§˜ä¸Šã¯å¤šè¨€èªå¯¾å¿œã®è©±è€…ã‚’å®šç¾©ã§ãã¾ã™ãŒã€AivisSpeech Engine ã¯ VOICEVOX ENGINE ã¨åŒæ§˜ã«ã€æ—¥æœ¬èªéŸ³å£°åˆæˆã®ã¿ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚  
> ãã®ãŸã‚ã€è‹±èªã‚„ä¸­å›½èªã«å¯¾å¿œã—ãŸéŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã§ã‚ã£ã¦ã‚‚ã€æ—¥æœ¬èªä»¥å¤–ã®éŸ³å£°åˆæˆã¯ã§ãã¾ã›ã‚“ã€‚

### ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€

AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€OS ã”ã¨ã«ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®ã—ã¦ãã ã•ã„ã€‚  

- **Windows:** `C:\Users\(ãƒ¦ãƒ¼ã‚¶ãƒ¼å)\AppData\Roaming\AivisSpeech-Engine\Models`
- **macOS:** `~/Library/Application Support/AivisSpeech-Engine/Models`
- **Linux:** `~/.local/share/AivisSpeech-Engine/Models`

å®Ÿéš›ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ã¯ã€AivisSpeech Engine ã®èµ·å‹•ç›´å¾Œã®ãƒ­ã‚°ã« `Models directory:` ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

> [!TIP]  
> **AivisSpeech åˆ©ç”¨æ™‚ã¯ã€AivisSpeech ã® UI ç”»é¢ã‹ã‚‰ç°¡å˜ã«éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã§ãã¾ã™ï¼**  
> ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ–¹ã¯ã€åŸºæœ¬çš„ã«ã“ã¡ã‚‰ã®æ–¹æ³•ã§éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

> [!IMPORTANT]
> é–‹ç™ºç‰ˆ (PyInstaller ã§ãƒ“ãƒ«ãƒ‰ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆ) ã®é…ç½®ãƒ•ã‚©ãƒ«ãƒ€ã¯ã€`AivisSpeech-Engine` ä»¥ä¸‹ã§ã¯ãªã `AivisSpeech-Engine-Dev` ä»¥ä¸‹ã¨ãªã‚Šã¾ã™ã€‚

## å°å…¥æ–¹æ³•
 
**AivisSpeech Engine ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨ã§ãã¾ã™ï¼**
- `--host 0.0.0.0` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€åŒä¸€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã®ä»–ã®ç«¯æœ«ã‹ã‚‰ã‚‚ AivisSpeech Engine ã¸ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
- `--cors_policy_mode all` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰ã® [CORS](https://developer.mozilla.org/ja/docs/Web/HTTP/CORS) ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¨±å¯ã—ã¾ã™ã€‚
- `--load_all_models` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€AivisSpeech Engine ã®èµ·å‹•æ™‚ã«ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’äº‹å‰ã«ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
- `--help` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¸€è¦§ã¨èª¬æ˜ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

ãã®ä»–ã«ã‚‚å¤šãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚è©³ç´°ã¯ `--help` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã”ç¢ºèªãã ã•ã„ã€‚

> [!TIP]
> **`--use_gpu` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€Windows ã§ã¯ DirectML ã€Linux ã§ã¯ NVIDIA GPU (CUDA) ã‚’æ´»ç”¨ã—ã€é«˜é€Ÿã«éŸ³å£°åˆæˆã‚’è¡Œãˆã¾ã™ã€‚**  
> ãªãŠã€Windows ç’°å¢ƒã§ã¯ CPU å†…è”µã® GPU (iGPU) ã®ã¿ã® PC ã§ã‚‚ DirectML æ¨è«–ã‚’è¡Œãˆã¾ã™ãŒã€ã»ã¨ã‚“ã©ã®å ´åˆ CPU æ¨è«–ã‚ˆã‚Šã‚‚ã‹ãªã‚Šé…ããªã£ã¦ã—ã¾ã†ãŸã‚ã€ãŠã™ã™ã‚ã§ãã¾ã›ã‚“ã€‚  
> è©³ç´°ã¯ [ã‚ˆãã‚ã‚‹è³ªå•](#q-gpu-ãƒ¢ãƒ¼ãƒ‰---use_gpu-ã«åˆ‡ã‚Šæ›¿ãˆãŸã®ã«éŸ³å£°ç”ŸæˆãŒ-cpu-ãƒ¢ãƒ¼ãƒ‰ã‚ˆã‚Šã‚‚é…ã„ã§ã™) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ 

> [!NOTE]
> AivisSpeech Engine ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒãƒ¼ãƒˆç•ªå· `10101` ã§å‹•ä½œã—ã¾ã™ã€‚  
> ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ç«¶åˆã™ã‚‹å ´åˆã¯ã€`--port` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä»»æ„ã®ãƒãƒ¼ãƒˆç•ªå·ã«å¤‰æ›´ã§ãã¾ã™ã€‚

> [!WARNING]
> VOICEVOX ENGINE ã¨ç•°ãªã‚Šã€ä¸€éƒ¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ AivisSpeech Engine ã§ã¯æœªå®Ÿè£…ã§ã™ã€‚

### Windows / macOS

**Windows / macOS ã§ã¯ã€AivisSpeech Engine ã‚’å˜ç‹¬ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€[AivisSpeech](https://github.com/Aivis-Project/AivisSpeech/releases) æœ¬ä½“ã«ä»˜å±ã™ã‚‹ AivisSpeech Engine ã‚’å˜ç‹¬ã§èµ·å‹•ã•ã›ãŸæ–¹ãŒã‚ˆã‚Šç°¡å˜ã§ã™ã€‚**  

AivisSpeech ã«åŒæ¢±ã•ã‚Œã¦ã„ã‚‹ AivisSpeech Engine ã®å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ« (`run.exe` / `run`) ã®ãƒ‘ã‚¹ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚ 

- **Windows:** `C:\Program Files\AivisSpeech\AivisSpeech-Engine\run.exe`
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆã€`C:\Users\(ãƒ¦ãƒ¼ã‚¶ãƒ¼å)\AppData\Local\Programs\AivisSpeech\AivisSpeech-Engine\run.exe` ã¨ãªã‚Šã¾ã™ã€‚
- **macOS:** `/Applications/AivisSpeech.app/Contents/Resources/AivisSpeech-Engine/run`
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆã€`~/Applications/AivisSpeech.app/Contents/Resources/AivisSpeech-Engine/run` ã¨ãªã‚Šã¾ã™ã€‚

> [!NOTE]
> åˆå›èµ·å‹•æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ« (ç´„ 250MB) ã¨æ¨è«–æ™‚ã«å¿…è¦ãª [BERT ãƒ¢ãƒ‡ãƒ«](https://huggingface.co/tsukumijima/deberta-v2-large-japanese-char-wwm-onnx) (ç´„ 650MB) ãŒè‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹é–¢ä¿‚ã§ã€èµ·å‹•å®Œäº†ã¾ã§æœ€å¤§æ•°åˆ†ã»ã©ã‹ã‹ã‚Šã¾ã™ã€‚  
> èµ·å‹•å®Œäº†ã¾ã§ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚

AivisSpeech Engine ã«éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€[ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€](#ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€) ã‚’ã”è¦§ãã ã•ã„ã€‚  
AivisSpeech å†…ã®ã€Œè¨­å®šã€â†’ã€ŒéŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã®ç®¡ç†ã€ã‹ã‚‰è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

### Linux

Linux + NVIDIA GPU ç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹éš›ã¯ã€ONNX Runtime ãŒå¯¾å¿œã™ã‚‹ CUDA / cuDNN ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ›ã‚¹ãƒˆç’°å¢ƒã® CUDA / cuDNN ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸€è‡´ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã€å‹•ä½œæ¡ä»¶ãŒå³ã—ã‚ã§ã™ã€‚  
å…·ä½“çš„ã«ã¯ã€AivisSpeech Engine ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ ONNX Runtime ã¯ CUDA 12.x / cuDNN 9.x ä»¥ä¸Šã‚’è¦æ±‚ã—ã¾ã™ã€‚

Docker ã§ã‚ã‚Œã°ãƒ›ã‚¹ãƒˆ OS ã®ç’°å¢ƒã«é–¢ã‚ã‚‰ãšå‹•ä½œã—ã¾ã™ã®ã§ã€Docker ã§ã®å°å…¥ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

### Linux + Docker

**Docker ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹éš›ã¯ã€å¸¸ã« `~/.local/share/AivisSpeech-Engine` ã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã® `/home/user/.local/share/AivisSpeech-Engine-Dev` ã«ãƒã‚¦ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚**  
ã“ã†ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ãƒ»å†èµ·å‹•ã—ãŸå¾Œã§ã‚‚ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸéŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚„ BERT ãƒ¢ãƒ‡ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (ç´„ 650MB) ã‚’ç¶­æŒã§ãã¾ã™ã€‚

Docker ç’°å¢ƒã® AivisSpeech Engine ã«éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€ãƒ›ã‚¹ãƒˆç’°å¢ƒã® `~/.local/share/AivisSpeech-Engine/Models` ä»¥ä¸‹ã«ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ« (.aivmx) ã‚’é…ç½®ã—ã¦ãã ã•ã„ã€‚

> [!IMPORTANT]
> å¿…ãš `/home/user/.local/share/AivisSpeech-Engine-Dev` ã«å¯¾ã—ã¦ãƒã‚¦ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚  
> Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸Šã® AivisSpeech Engine ã¯ PyInstaller ã§ãƒ“ãƒ«ãƒ‰ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€åã«ã¯ `-Dev` ã® Suffix ãŒä»˜ä¸ã•ã‚Œ `AivisSpeech-Engine-Dev` ã¨ãªã‚Šã¾ã™ã€‚

#### CPU ã§å®Ÿè¡Œã™ã‚‹

```bash
docker pull ghcr.io/aivis-project/aivisspeech-engine:cpu-latest
docker run --rm -p '10101:10101' \
  -v ~/.local/share/AivisSpeech-Engine:/home/user/.local/share/AivisSpeech-Engine-Dev \
  ghcr.io/aivis-project/aivisspeech-engine:cpu-latest
```

#### NVIDIA GPU (CUDA) ã§å®Ÿè¡Œã™ã‚‹

```bash
docker pull ghcr.io/aivis-project/aivisspeech-engine:nvidia-latest
docker run --rm --gpus all -p '10101:10101' \
  -v ~/.local/share/AivisSpeech-Engine:/home/user/.local/share/AivisSpeech-Engine-Dev \
  ghcr.io/aivis-project/aivisspeech-engine:nvidia-latest
```

## éŸ³å£°åˆæˆ API ã‚’ä½¿ã†

Bash ã§ä»¥ä¸‹ã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`audio.wav` ã«éŸ³å£°åˆæˆã—ãŸ WAV ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

> [!IMPORTANT]  
> **äº‹å‰ã« AivisSpeech Engine ãŒèµ·å‹•ã—ã¦ã„ã¦ã€ã‹ã¤ãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚Œã‚‹ `Models directory:` ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã€ã‚¹ã‚¿ã‚¤ãƒ« ID ã«å¯¾å¿œã™ã‚‹éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ« (.aivmx) ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå‰æã§ã™ã€‚**

```bash
# STYLE_ID ã¯éŸ³å£°åˆæˆå¯¾è±¡ã®ã‚¹ã‚¿ã‚¤ãƒ« ID ã€åˆ¥é€” /speakers API ã‹ã‚‰å–å¾—ãŒå¿…è¦
STYLE_ID=888753760 && \
echo -n "ã“ã‚“ã«ã¡ã¯ã€éŸ³å£°åˆæˆã®ä¸–ç•Œã¸ã‚ˆã†ã“ãï¼" > text.txt && \
curl -s -X POST "127.0.0.1:10101/audio_query?speaker=$STYLE_ID" --get --data-urlencode text@text.txt > query.json && \
curl -s -H "Content-Type: application/json" -X POST -d @query.json "127.0.0.1:10101/synthesis?speaker=$STYLE_ID" > audio.wav && \
rm text.txt query.json
```

> [!TIP]
> **è©³ã—ã„ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä»•æ§˜ã¯ [API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://aivis-project.github.io/AivisSpeech-Engine/api/) ã‚„ [VOICEVOX API ã¨ã®äº’æ›æ€§ã«ã¤ã„ã¦](#voicevox-api-ã¨ã®äº’æ›æ€§ã«ã¤ã„ã¦) ã‚’ã”å‚ç…§ãã ã•ã„ã€‚API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€æœ€æ–°ã®é–‹ç™ºç‰ˆã§ã®å¤‰æ›´ã‚’éšæ™‚åæ˜ ã—ã¦ã„ã¾ã™ã€‚**
> 
> èµ·å‹•ä¸­ã® AivisSpeech Engine ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (Swagger UI) ã¯ã€AivisSpeech Engine ã‚‚ã—ãã¯ AivisSpeech ã‚¨ãƒ‡ã‚£ã‚¿ã‚’èµ·å‹•ã—ãŸçŠ¶æ…‹ã§ã€http://127.0.0.1:10101/docs ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ç¢ºèªã§ãã¾ã™ã€‚

## VOICEVOX API ã¨ã®äº’æ›æ€§ã«ã¤ã„ã¦

AivisSpeech Engine ã¯ã€æ¦‚ã­ VOICEVOX ENGINE ã® HTTP API ã¨äº’æ›æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**VOICEVOX ENGINE ã® HTTP API ã«å¯¾å¿œã—ãŸã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã‚ã‚Œã°ã€API URL ã‚’ `http://127.0.0.1:10101` ã«å·®ã—æ›¿ãˆã‚‹ã ã‘ã§ã€AivisSpeech Engine ã«å¯¾å¿œã§ãã‚‹ã¯ãšã§ã™ã€‚**

> [!IMPORTANT]  
> **ãŸã ã—ã€API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ `/audio_query` API ã‹ã‚‰å–å¾—ã—ãŸ `AudioQuery` ã®å†…å®¹ã‚’ç·¨é›†ã—ã¦ã‹ã‚‰ `/synthesis` API ã«æ¸¡ã—ã¦ã„ã‚‹å ´åˆã¯ã€ä»•æ§˜å·®ç•°ã«ã‚ˆã‚Šæ­£å¸¸ã«éŸ³å£°åˆæˆã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ (å¾Œè¿°) ã€‚**
> 
> ã“ã®é–¢ä¿‚ã§ã€**AivisSpeech ã‚¨ãƒ‡ã‚£ã‚¿ã¯ AivisSpeech Engine ã¨ VOICEVOX ENGINE ã®ä¸¡æ–¹ã‚’åˆ©ç”¨ã§ãã¾ã™ãŒï¼ˆãƒãƒ«ãƒã‚¨ãƒ³ã‚¸ãƒ³æ©Ÿèƒ½åˆ©ç”¨æ™‚ï¼‰ã€VOICEVOX ã‚¨ãƒ‡ã‚£ã‚¿ã‹ã‚‰ AivisSpeech Engine ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚**  
> VOICEVOX ã‚¨ãƒ‡ã‚£ã‚¿ã§ AivisSpeech Engine ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®å®Ÿè£…ä¸Šã®åˆ¶é™ã«ã‚ˆã‚ŠéŸ³å£°åˆæˆã®å“è³ªãŒè‘—ã—ãä½ä¸‹ã—ã¾ã™ã€‚AivisSpeech Engine ç‹¬è‡ªã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚æ´»ç”¨ã§ããªããªã‚‹ã»ã‹ã€éå¯¾å¿œæ©Ÿèƒ½ã®å‘¼ã³å‡ºã—ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã€‚  
> ã‚ˆã‚Šè‰¯ã„éŸ³å£°åˆæˆçµæœã‚’å¾—ã‚‹ãŸã‚ã€AivisSpeech ã‚¨ãƒ‡ã‚£ã‚¿ã§ã®åˆ©ç”¨ã‚’å¼·ããŠã™ã™ã‚ã—ã¾ã™ã€‚

> [!NOTE]  
> ä¸€èˆ¬çš„ãª API ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ãŠã„ã¦ã¯æ¦‚ã­äº’æ›æ€§ãŒã‚ã‚‹ã¯ãšã§ã™ãŒã€**æ ¹æœ¬çš„ã«ç•°ãªã‚‹ãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®éŸ³å£°åˆæˆã‚·ã‚¹ãƒ†ãƒ ã‚’å¼·å¼•ã«åŒä¸€ã® API ä»•æ§˜ã«åã‚ã¦ã„ã‚‹é–¢ä¿‚ã§ã€ä¸‹è¨˜ä»¥å¤–ã«ã‚‚äº’æ›æ€§ã®ãªã„ API ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚**  
> Issue ã«ã¦å ±å‘Šé ‚ã‘ã‚Œã°ã€äº’æ›æ€§æ”¹å–„ãŒå¯èƒ½ãªã‚‚ã®ã«é–¢ã—ã¦ã¯ä¿®æ­£ã„ãŸã—ã¾ã™ã€‚

VOICEVOX ENGINE ã‹ã‚‰ã® API ä»•æ§˜ã®å¤‰æ›´ç‚¹ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

### AivisSpeech Engine ã«ãŠã‘ã‚‹ã‚¹ã‚¿ã‚¤ãƒ« ID

AIVMX ãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œã‚‹ AIVM ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆå†…ã®è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ­ãƒ¼ã‚«ãƒ« ID ã¯ã€è©±è€…ã”ã¨ã« 0 ã‹ã‚‰å§‹ã¾ã‚‹é€£ç•ªã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚  
Style-Bert-VITS2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã§ã¯ã€ã“ã®å€¤ã¯ãƒ¢ãƒ‡ãƒ«ã®ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `data.style2id` ã®å€¤ã¨ä¸€è‡´ã—ã¾ã™ã€‚

ä¸€æ–¹ã€VOICEVOX ENGINE ã® API ã§ã¯ã€æ­´å²çš„çµŒç·¯ã‹ã‚‰ã‹ã€Œè©±è€… UUIDã€(`speaker_uuid`) ã‚’æŒ‡å®šã›ãšã€ã€Œã‚¹ã‚¿ã‚¤ãƒ« IDã€(`style_id`) ã®ã¿ã‚’éŸ³å£°åˆæˆ API ã«æ¸¡ã™ä»•æ§˜ã¨ãªã£ã¦ã„ã¾ã™ã€‚  
VOICEVOX ENGINE ã§ã¯æ­è¼‰ã•ã‚Œã¦ã„ã‚‹è©±è€…ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã¯å›ºå®šã®ãŸã‚ã€é–‹ç™ºå´ã§ã€Œã‚¹ã‚¿ã‚¤ãƒ« IDã€ã‚’ä¸€æ„ã«ç®¡ç†ã§ãã¦ã„ã¾ã—ãŸã€‚

ä¸€æ–¹ã€AivisSpeech Engine ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªç”±ã«éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã§ãã‚‹ä»•æ§˜ã¨ãªã£ã¦ã„ã¾ã™ã€‚  
ãã®ãŸã‚ã€VOICEVOX API äº’æ›ã®ã€Œã‚¹ã‚¿ã‚¤ãƒ« IDã€ã¯ã€ã©ã®ã‚ˆã†ãªéŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ãŒè¿½åŠ ã•ã‚Œã¦ã‚‚ä¸€æ„ãªå€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚  
ã“ã‚Œã¯ã€ä¸€æ„ãªå€¤ã§ãªã„å ´åˆã€æ–°ã—ã„éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã—ãŸéš›ã«æ—¢å­˜ã®ãƒ¢ãƒ‡ãƒ«ã«å«ã¾ã‚Œã‚‹è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã¨ã‚¹ã‚¿ã‚¤ãƒ« ID ãŒé‡è¤‡ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚

ãã“ã§ AivisSpeech Engine ã§ã¯ã€**AIVM ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆä¸Šã®è©±è€… UUID ã¨ã‚¹ã‚¿ã‚¤ãƒ« ID ã‚’çµ„ã¿åˆã‚ã›ã¦ã€VOICEVOX API äº’æ›ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¸€æ„ãªã€Œã‚¹ã‚¿ã‚¤ãƒ« IDã€ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚**  
å…·ä½“çš„ãªç”Ÿæˆæ–¹æ³•ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

1. è©±è€… UUID ã‚’ MD5 ãƒãƒƒã‚·ãƒ¥å€¤ã«å¤‰æ›ã™ã‚‹
2. ã“ã®ãƒãƒƒã‚·ãƒ¥å€¤ã®ä¸‹ä½ 27bit ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« ID ã® 5bit (0 ~ 31) ã‚’çµ„ã¿åˆã‚ã›ã‚‹
3. 32bit ç¬¦å·ä»˜ãæ•´æ•°ã«å¤‰æ›ã™ã‚‹

> [!WARNING]  
> ã“ã®é–¢ä¿‚ã§ã€**ã€Œã‚¹ã‚¿ã‚¤ãƒ« IDã€ã« 32bit ç¬¦å·ä»˜ãæ•´æ•°ãŒå…¥ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ãªã„ VOICEVOX API å¯¾å¿œã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã¯ã€äºˆæœŸã›ã¬ä¸å…·åˆãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚**  

> [!WARNING]  
> 32bit ç¬¦å·ä»˜ãæ•´æ•°ã®ç¯„å›²ã«åã‚ã‚‹ãŸã‚ã«è©±è€… UUID ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªä¸€æ„æ€§ã‚’çŠ ç‰²ã«ã—ã¦ã„ã‚‹ãŸã‚ã€**æ¥µã‚ã¦ä½ã„ç¢ºç‡ã§ã™ãŒã€ç•°ãªã‚‹è©±è€…ã®ã‚¹ã‚¿ã‚¤ãƒ« ID ãŒé‡è¤‡ï¼ˆè¡çªï¼‰ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚**  
> ç¾æ™‚ç‚¹ã§ã‚¹ã‚¿ã‚¤ãƒ« ID ãŒé‡è¤‡ã—ãŸéš›ã®å›é¿ç­–ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ç¾å®Ÿçš„ã«ã¯ã»ã¨ã‚“ã©ã®ã‚±ãƒ¼ã‚¹ã§å•é¡Œã«ãªã‚‰ãªã„ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

> [!TIP]  
> **AivisSpeech Engine ã«ã‚ˆã£ã¦è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ VOICEVOX API äº’æ›ã®ã€Œã‚¹ã‚¿ã‚¤ãƒ« IDã€ã¯ã€`/speakers` API ã‹ã‚‰å–å¾—ã§ãã¾ã™ã€‚**  
> ã“ã® API ã¯ã€AivisSpeech Engine ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹è©±è€…æƒ…å ±ã®ä¸€è¦§ã‚’è¿”ã—ã¾ã™ã€‚

### `AudioQuery` å‹ã®ä»•æ§˜å¤‰æ›´

`AudioQuery` å‹ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆã‚„éŸ³ç´ åˆ—ã‚’æŒ‡å®šã—ã¦éŸ³å£°åˆæˆã‚’è¡Œã†ãŸã‚ã®ã‚¯ã‚¨ãƒªã§ã™ã€‚

VOICEVOX ENGINE ã® `AudioQuery` å‹ã‹ã‚‰ã®ä¸»ãªå¤‰æ›´ç‚¹ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

- **`intonationScale` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ„å‘³ãŒç•°ãªã‚Šã¾ã™ã€‚**
  - VOICEVOX ENGINE ã§ã¯ã€Œå…¨ä½“ã®æŠ‘æšã€ã‚’è¡¨ã™ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã—ãŸãŒã€AivisSpeech Engine ã§ã¯ã€Œè©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã®æ„Ÿæƒ…è¡¨ç¾ã®å¼·ã•ã€ã‚’è¡¨ã™ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚
  - é¸æŠã—ãŸè©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã®æ„Ÿæƒ…è¡¨ç¾ã®å¼·å¼±ã‚’ 0.0 ~ 2.0 ã®ç¯„å›²ã§æŒ‡å®šã—ã¾ã™ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0) ã€‚
  - æ•°å€¤ãŒå¤§ãã„ã»ã©ã€é¸æŠã—ãŸè©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã«è¿‘ã„æ„Ÿæƒ…è¡¨ç¾ãŒè¾¼ã‚ã‚‰ã‚ŒãŸå£°ã«ãªã‚Šã¾ã™ã€‚
    - ä¾‹ãˆã°è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ãŒã€Œä¸Šæ©Ÿå«Œã€ãªã‚‰ã€æ•°å€¤ãŒå¤§ãã„ã»ã©ã‚ˆã‚Šå¬‰ã—ãã†ãªæ˜ã‚‹ã„è©±ã—æ–¹ã«ãªã‚Šã¾ã™ã€‚
    - ä¸€æ–¹ã§ã€è©±è€…ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã«ã‚ˆã£ã¦ã¯ã€æ•°å€¤ã‚’ä¸Šã’ã™ãã‚‹ã¨ç™ºå£°ãŒãŠã‹ã—ããªã£ãŸã‚Šã€æ£’èª­ã¿ã§ä¸è‡ªç„¶ãªå£°ã«ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚
    - æ­£ã—ãç™ºå£°ã§ãã‚‹ä¸Šé™å€¤ã¯è©±è€…ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã”ã¨ã«ç•°ãªã‚Šã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦æœ€é©ãªå€¤ã‚’è¦‹ã¤ã‘ã¦èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
  - å…¨ã‚¹ã‚¿ã‚¤ãƒ«ã®å¹³å‡ã§ã‚ã‚‹ãƒãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ã§ã¯è‡ªå‹•ã§é©åˆ‡ãªæ„Ÿæƒ…è¡¨ç¾ãŒé¸æŠã•ã‚Œã‚‹ãŸã‚ã€ã“ã®å€¤ã‚’æŒ‡å®šã—ã¦ã‚‚ç„¡è¦–ã•ã‚Œã¾ã™ã€‚
  - Style-Bert-VITS2 ã«ãŠã‘ã‚‹ã€Œã‚¹ã‚¿ã‚¤ãƒ«ã®å¼·ã•ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€AivisSpeech Engine ã® `intonationScale` ã«å¤‰æ›ã•ã‚Œã‚‹éš›ã«ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚
    - `intonationScale` ãŒ 0.0 ~ 1.0 ã®å ´åˆã€Style-Bert-VITS2 ã§ã¯ 0.0 ~ 1.0 ã®ç¯„å›²ã«ç›¸å½“ã—ã¾ã™ã€‚
    - `intonationScale` ãŒ 1.0 ~ 2.0 ã®å ´åˆã€Style-Bert-VITS2 ã§ã¯ 1.0 ~ 10.0 ã®ç¯„å›²ã«ç›¸å½“ã—ã¾ã™ã€‚
- **`tempoDynamicsScale` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç‹¬è‡ªã«è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚**
  - AivisSpeech Engine å›ºæœ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚è©±ã™é€Ÿã•ã®ç·©æ€¥ã®å¼·å¼±ã‚’ 0.0 ~ 2.0 ã®ç¯„å›²ã§æŒ‡å®šã§ãã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0ï¼‰ã€‚
  - å€¤ãŒå¤§ãã„ã»ã©ã€ã‚ˆã‚Šæ—©å£ã§ç”Ÿã£ã½ã„æŠ‘æšãŒã¤ã„ãŸå£°ã«ãªã‚Šã¾ã™ã€‚
  - Style-Bert-VITS2 ã«ãŠã‘ã‚‹ã€Œãƒ†ãƒ³ãƒã®ç·©æ€¥ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€AivisSpeech Engine ã® `tempoDynamicsScale` ã«å¤‰æ›ã•ã‚Œã‚‹éš›ã«ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚
    - `tempoDynamicsScale` ãŒ 0.0 ~ 1.0 ã®å ´åˆã€Style-Bert-VITS2 ã§ã¯ 0.0 ~ 0.2 ã®ç¯„å›²ã«ç›¸å½“ã—ã¾ã™ã€‚
    - `tempoDynamicsScale` ãŒ 1.0 ~ 2.0 ã®å ´åˆã€Style-Bert-VITS2 ã§ã¯ 0.2 ~ 1.0 ã®ç¯„å›²ã«ç›¸å½“ã—ã¾ã™ã€‚
- **`pitchScale` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä»•æ§˜ãŒç•°ãªã‚Šã¾ã™ã€‚**
  - VOICEVOX ENGINE ã¨ç•°ãªã‚Šã€ã“ã®å€¤ã‚’ 0.0 ã‹ã‚‰å¤‰æ›´ã™ã‚‹ã¨éŸ³è³ªãŒåŠ£åŒ–ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
- **`pauseLength` ãŠã‚ˆã³ `pauseLengthScale` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**
  - äº’æ›æ€§ã®ãŸã‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦å­˜åœ¨ã¯ã—ã¾ã™ãŒã€å¸¸ã«ç„¡è¦–ã•ã‚Œã¾ã™ã€‚
- **`kana` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä»•æ§˜ãŒç•°ãªã‚Šã¾ã™ã€‚**
  - VOICEVOX ENGINE ã§ã¯ AquesTalk é¢¨è¨˜æ³•ãƒ†ã‚­ã‚¹ãƒˆãŒå…¥ã‚‹èª­ã¿å–ã‚Šå°‚ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã—ãŸãŒã€AivisSpeech Engine ã§ã¯é€šå¸¸ã®èª­ã¿ä¸Šã’ãƒ†ã‚­ã‚¹ãƒˆã‚’æŒ‡å®šã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
  - null ã‚„ç©ºæ–‡å­—åˆ—ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã¯ã€ã‚¢ã‚¯ã‚»ãƒ³ãƒˆå¥ã‹ã‚‰è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã²ã‚‰ãŒãªæ–‡å­—åˆ—ãŒèª­ã¿ä¸Šã’ãƒ†ã‚­ã‚¹ãƒˆã¨ãªã‚Šã¾ã™ãŒã€ä¸è‡ªç„¶ãªã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
  - ã‚ˆã‚Šè‡ªç„¶ãªéŸ³å£°åˆæˆçµæœã‚’å¾—ã‚‹ãŸã‚ã€å¯èƒ½ãªé™ã‚Šé€šå¸¸ã®èª­ã¿ä¸Šã’ãƒ†ã‚­ã‚¹ãƒˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

å¤‰æ›´ç‚¹ã®è©³ç´°ã¯ã€[model.py](./voicevox_engine/model.py) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### `Mora` å‹ã®ä»•æ§˜å¤‰æ›´

`Mora` å‹ã¯ã€èª­ã¿ä¸Šã’ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ¢ãƒ¼ãƒ©ã‚’è¡¨ã™ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã™ã€‚

> [!TIP]  
> ãƒ¢ãƒ¼ãƒ©ã¨ã¯ã€å®Ÿéš›ã«ç™ºéŸ³ã•ã‚Œã‚‹éš›ã®éŸ³ã®ã¾ã¨ã¾ã‚Šã®æœ€å°å˜ä½ï¼ˆã€Œã‚ã€ã€Œã‹ã€ã€Œã‚’ã€ãªã©ï¼‰ã®ã“ã¨ã§ã™ã€‚  
> `Mora` å‹å˜ç‹¬ã§ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ä½¿ã‚ã‚Œã‚‹ã“ã¨ã¯ãªãã€å¸¸ã« `AudioQuery.accent_phrases[n].moras` ã¾ãŸã¯ `AudioQuery.accent_phrases[n].pause_mora` ã‚’é€šã—ã¦é–“æ¥çš„ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚

VOICEVOX ENGINE ã® `Mora` å‹ã‹ã‚‰ã®ä¸»ãªå¤‰æ›´ç‚¹ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

- **è¨˜å·ã‚‚ãƒ¢ãƒ¼ãƒ©ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚**
  - VOICEVOX ENGINE ã§ã¯æ„Ÿå˜†ç¬¦ãƒ»å¥èª­ç‚¹ãªã©ã®è¨˜å·ã¯ `pause_mora` ã¨ã—ã¦æ‰±ã‚ã‚Œã¦ã„ã¾ã—ãŸãŒã€AivisSpeech Engine ã§ã¯é€šå¸¸ã®ãƒ¢ãƒ¼ãƒ©ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚
  - è¨˜å·ãƒ¢ãƒ¼ãƒ©ã®å ´åˆã€`text` ã«ã¯è¨˜å·ãŒãã®ã¾ã¾ã€`vowel` ã«ã¯ "pau" ãŒè¨­å®šã•ã‚Œã¾ã™ã€‚
- **`consonant` / `vowel` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯èª­ã¿å–ã‚Šå°‚ç”¨ã§ã™ã€‚**
  - éŸ³å£°åˆæˆæ™‚ã®ãƒ†ã‚­ã‚¹ãƒˆã®èª­ã¿ã«ã¯ã€å¸¸ã« `text` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ãŒåˆ©ç”¨ã•ã‚Œã¾ã™ã€‚
  - ã“ã‚Œã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’å¤‰æ›´ã—ã¦ã‚‚ã€éŸ³å£°åˆæˆçµæœã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ã€‚
- **`consonant_length` / `vowel_length` / `pitch` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**
  - AivisSpeech Engine ã®å®Ÿè£…ä¸Šã€ã“ã‚Œã‚‰ã®å€¤ã‚’ç®—å‡ºã™ã‚‹ã“ã¨ãŒã§ããªã„ãŸã‚ã€å¸¸ã«ãƒ€ãƒŸãƒ¼å€¤ã¨ã—ã¦ 0.0 ãŒè¿”ã•ã‚Œã¾ã™ã€‚
  - äº’æ›æ€§ã®ãŸã‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦å­˜åœ¨ã¯ã—ã¾ã™ãŒã€å¸¸ã«ç„¡è¦–ã•ã‚Œã¾ã™ã€‚

å¤‰æ›´ç‚¹ã®è©³ç´°ã¯ã€[tts_pipeline/model.py](./voicevox_engine/tts_pipeline/model.py) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### `Preset` å‹ã®ä»•æ§˜å¤‰æ›´

`Preset` å‹ã¯ã€ã‚¨ãƒ‡ã‚£ã‚¿å´ã§éŸ³å£°åˆæˆã‚¯ã‚¨ãƒªã®åˆæœŸå€¤ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã®ãƒ—ãƒªã‚»ãƒƒãƒˆæƒ…å ±ã§ã™ã€‚

å¤‰æ›´ç‚¹ã¯ã€`AudioQuery` å‹ã§èª¬æ˜ã—ãŸ `intonationScale` / `tempoDynamicsScale` / `pitchScale` / `pauseLength` / `pauseLengthScale` ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä»•æ§˜å¤‰æ›´ã«æ¦‚ã­å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

å¤‰æ›´ç‚¹ã®è©³ç´°ã¯ã€[preset/model.py](./voicevox_engine/preset/model.py) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### AivisSpeech Engine ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

> [!WARNING]  
> **æ­Œå£°åˆæˆç³» API ã¨ã€ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½ãªéŸ³å£°åˆæˆ API ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**  
> äº’æ›æ€§ã®ãŸã‚ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦å­˜åœ¨ã¯ã—ã¾ã™ãŒã€å¸¸ã« `501 Not Implemented` ã‚’è¿”ã—ã¾ã™ã€‚  
> è©³ç´°ã¯ [app/routers/character.py](./voicevox_engine/app/routers/character.py) / [app/routers/tts_pipeline.py](./voicevox_engine/app/routers/tts_pipeline.py) ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

- **GET `/singers`**
- **GET `/singer_info`**
- **POST `/cancellable_synthesis`**
- **POST `/sing_frame_audio_query`**
- **POST `/sing_frame_volume`**
- **POST `/frame_synthesis`**

> [!WARNING]  
> **ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ `/synthesis_morphing` API ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**  
> è©±è€…ã”ã¨ã«ç™ºå£°ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒç•°ãªã‚‹é–¢ä¿‚ã§å®Ÿè£…ä¸å¯èƒ½ãªãŸã‚ï¼ˆå‹•ä½œã“ãã™ã‚‹ãŒè´ãã«è€ãˆãªã„ï¼‰ã€å¸¸ã« `400 Bad Request` ã‚’è¿”ã—ã¾ã™ã€‚  
> å„è©±è€…ã”ã¨ã«ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã®åˆ©ç”¨å¯å¦ã‚’è¿”ã™ `/morphable_targets` API ã§ã¯ã€ã™ã¹ã¦ã®è©±è€…ã§ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ç¦æ­¢æ‰±ã„ã¨ã—ã¦ã„ã¾ã™ã€‚  
> è©³ç´°ã¯ [app/routers/morphing.py](./voicevox_engine/app/routers/morphing.py) ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

- **POST `/synthesis_morphing`**
- **POST `/morphable_targets`**

### AivisSpeech Engine ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ API ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

> [!WARNING]  
> **äº’æ›æ€§ã®ãŸã‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦å­˜åœ¨ã¯ã—ã¾ã™ãŒã€å¸¸ã«ç„¡è¦–ã•ã‚Œã¾ã™ã€‚**  
> è©³ç´°ã¯ [app/routers/character.py](./voicevox_engine/app/routers/character.py) / [app/routers/tts_pipeline.py](./voicevox_engine/app/routers/tts_pipeline.py) ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

- **`core_version` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**
  - VOICEVOX CORE ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚
  - AivisSpeech Engine ã§ã¯ VOICEVOX CORE ã«å¯¾å¿œã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãªã„ãŸã‚ã€å¸¸ã«ç„¡è¦–ã•ã‚Œã¾ã™ã€‚
- **`enable_interrogative_upspeak` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**
  - ç–‘å•ç³»ã®ãƒ†ã‚­ã‚¹ãƒˆãŒä¸ãˆã‚‰ã‚ŒãŸã‚‰èªå°¾ã‚’è‡ªå‹•èª¿æ•´ã™ã‚‹ã‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚
  - AivisSpeech Engine ã§ã¯ã€å¸¸ã«ã€Œï¼ã€ã€Œï¼Ÿã€ã€Œâ€¦ã€ã€Œã€œã€ãªã©ã®ãƒ†ã‚­ã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹è¨˜å·ã«å¯¾å¿œã—ãŸã€è‡ªç„¶ãªæŠ‘æšã§èª­ã¿ä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚
  - ã—ãŸãŒã£ã¦ã€`ã©ã†ã§ã™ã‹â€¦ï¼Ÿ` ã®ã‚ˆã†ã«èª­ã¿ä¸Šã’ãƒ†ã‚­ã‚¹ãƒˆã®æœ«å°¾ã«ã€Œï¼Ÿã€ã‚’ä»˜ä¸ã™ã‚‹ã ã‘ã§ã€ç–‘å•ç³»ã®æŠ‘æšã§èª­ã¿ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ã‚ˆãã‚ã‚‹è³ªå• / Q&A

> [!TIP]  
> **AivisSpeech ã‚¨ãƒ‡ã‚£ã‚¿ã® [ã‚ˆãã‚ã‚‹è³ªå• / Q&A](https://github.com/Aivis-Project/AivisSpeech/blob/master/public/qAndA.md) ã‚‚ã‚ã‚ã›ã¦ã”è¦§ãã ã•ã„ã€‚**

### Q. ã€Œæ„Ÿæƒ…è¡¨ç¾ã®å¼·ã•ã€(`intonationScale`) ã®å€¤ã‚’ä¸Šã’ã‚‹ã¨ç™ºå£°ãŒãŠã‹ã—ããªã‚Šã¾ã™ã€‚

AivisSpeech Engine ã§å¯¾å¿œã—ã¦ã„ã‚‹ã€Style-Bert-VITS2 ãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç¾æ™‚ç‚¹ã§ã®ä»•æ§˜ã«ãªã‚Šã¾ã™ã€‚  
è©±è€…ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒã€`intonationScale` ã®å€¤ã‚’ä¸Šã’ã™ãã‚‹ã¨ç™ºå£°ãŒãŠã‹ã—ããªã£ãŸã‚Šã€æ£’èª­ã¿ã§ä¸è‡ªç„¶ãªå£°ã«ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚  

æ­£ã—ãç™ºå£°ã§ãã‚‹ `intonationScale` ã®ä¸Šé™å€¤ã¯ã€è©±è€…ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã”ã¨ã«ç•°ãªã‚Šã¾ã™ã€‚  
å¿…è¦ã«å¿œã˜ã¦ã€ãã‚Œãã‚Œã®å£°ã«åˆã£ãŸæœ€é©ãªå€¤ã‚’è¦‹ã¤ã‘ã¦èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

### Q. èª­ã¿æ–¹ãŒæƒ³å®šã¨ç•°ãªã‚Šã¾ã™ã€‚

AivisSpeech Engine ã§ã¯ãªã‚‹ã¹ãä¸€ç™ºã§æ­£ã—ã„èª­ã¿ãƒ»æ­£ã—ã„ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã«ãªã‚‹ã‚ˆã†å‡¦ç†ã‚’å·¥å¤«ã—ã¦ã„ã¾ã™ãŒã€ã©ã†ã—ã¦ã‚‚é–“é•ã£ãŸèª­ã¿ãƒ»ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã«ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚  
ã‚ã¾ã‚Šä½¿ã‚ã‚Œãªã„å›ºæœ‰åè©ã‚„äººåï¼ˆç‰¹ã«ã‚­ãƒ©ã‚­ãƒ©ãƒãƒ¼ãƒ ï¼‰ãªã©ã€å†…è”µè¾æ›¸ã«ç™»éŒ²ã•ã‚Œã¦ã„ãªã„å˜èªã¯ã€æ­£ã—ã„èª­ã¿ã«ãªã‚‰ãªã„ã“ã¨ãŒå¤šã„ã§ã™ã€‚  

ã“ã†ã—ãŸå˜èªã®èª­ã¿æ–¹ã¯è¾æ›¸ç™»éŒ²ã§å¤‰æ›´ã§ãã¾ã™ã€‚AivisSpeech ã‚¨ãƒ‡ã‚£ã‚¿ã¾ãŸã¯ API ã‹ã‚‰å˜èªã‚’ç™»éŒ²ã—ã¦ã¿ã¦ãã ã•ã„ã€‚  
ãªãŠã€è¤‡åˆèªã‚„è‹±å˜èªã«é–¢ã—ã¦ã¯ã€å˜èªã®å„ªå…ˆåº¦ã«ã‹ã‹ã‚ã‚‰ãšã€è¾æ›¸ã¸ã®ç™»éŒ²å†…å®¹ãŒåæ˜ ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ç¾æ™‚ç‚¹ã§ã®ä»•æ§˜ã«ãªã‚Šã¾ã™ã€‚

### Q. é•·ã„æ–‡ç« ã‚’ä¸€åº¦ã«éŸ³å£°åˆæˆ API ã«é€ã‚‹ã¨ã€éŸ³å£°ãŒä¸è‡ªç„¶ã«ãªã£ãŸã‚Šãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒç™ºç”Ÿã—ã¾ã™ã€‚

AivisSpeech Engine ã¯ã€ä¸€æ–‡ã‚„æ„å‘³ã®ã¾ã¨ã¾ã‚Šãªã©ã€æ¯”è¼ƒçš„çŸ­ã„æ–‡ã®å˜ä½ã§éŸ³å£°åˆæˆã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚  
ãã®ãŸã‚ã€1000 æ–‡å­—ã‚’è¶…ãˆã‚‹ã‚ˆã†ãªé•·ã„æ–‡ç« ã‚’ä¸€åº¦ã« `/synthesis` API ã«é€ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒæ€¥æ¿€ã«å¢—åŠ ã—ã€PC ã®å‹•ä½œãŒé…ããªã‚‹
- ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒç™ºç”Ÿã—ã€AivisSpeech Engine ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹
- éŸ³å£°ã®æŠ‘æšãŒä¸è‡ªç„¶ã«ãªã‚Šã€æ£’èª­ã¿ã®ã‚ˆã†ãªå£°ã«ãªã‚‹

**é•·ã„æ–‡ç« ã‚’éŸ³å£°åˆæˆã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªä½ç½®ã§æ–‡ç« ã‚’åŒºåˆ‡ã£ã¦ã€ãã‚Œãã‚ŒéŸ³å£°åˆæˆ API ã«é€ä¿¡ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚**  
ãƒãƒ¼ãƒ‰ãƒªãƒŸãƒƒãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€éŸ³å£°åˆæˆ1å›ã«ã¤ã 500 æ–‡å­—ä»¥å†…ãŒæœ›ã¾ã—ã„ã§ã™ã€‚

- å¥èª­ç‚¹ï¼ˆã€Œã€‚ã€ã€Œã€ã€ï¼‰ã®ä½ç½®
- æ–‡ã®æ„å‘³ã®åˆ‡ã‚Œç›®ï¼ˆæ®µè½ã®åŒºåˆ‡ã‚Šãªã©ï¼‰
- ä¼šè©±æ–‡ã®åŒºåˆ‡ã‚Šï¼ˆã€Œã€ã§å›²ã¾ã‚ŒãŸéƒ¨åˆ†ï¼‰

> [!TIP]  
> æ–‡ã®æ„å‘³ã®åˆ‡ã‚Œç›®ã§åˆ†å‰²ã™ã‚‹ã¨ã€ã‚ˆã‚Šè‡ªç„¶ãªæŠ‘æšã®éŸ³å£°ã‚’ç”Ÿæˆã§ãã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚  
> ã“ã‚Œã¯ã€ä¸€åº¦ã«éŸ³å£°åˆæˆ API ã«é€ã‚‰ã‚ŒãŸæ–‡ç« å…¨ä½“ã«ã€ãƒ†ã‚­ã‚¹ãƒˆã®å†…å®¹ã«å¯¾å¿œã™ã‚‹æ„Ÿæƒ…è¡¨ç¾ã‚„æŠ‘æšãŒé©ç”¨ã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚  
> æ–‡ç« ã‚’é©åˆ‡ã«åˆ†å‰²ã™ã‚‹ã“ã¨ã§ã€å„æ–‡ã®æ„Ÿæƒ…è¡¨ç¾ã‚„ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆã—ã€ã‚ˆã‚Šè‡ªç„¶ãªèª­ã¿ä¸Šã’ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

### Q. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã® PC ã§ã‚‚åˆ©ç”¨ã§ãã¾ã™ã‹ï¼Ÿ

AivisSpeech ã‚’ã¯ã˜ã‚ã¦èµ·å‹•ã™ã‚‹ã¨ãã®ã¿ã€ãƒ¢ãƒ‡ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®ãŸã‚ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚  
2å›ç›®ä»¥é™ã®èµ·å‹•ã§ã¯ã€PC ãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚ãŠä½¿ã„ã„ãŸã ã‘ã¾ã™ã€‚

### Q. è¾æ›¸ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸã„ã§ã™ã€‚

èµ·å‹•ä¸­ã® AivisSpeech Engine ã®è¨­å®šç”»é¢ã§è¡Œãˆã¾ã™ã€‚

AivisSpeech Engine èµ·å‹•ä¸­ã«ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ `http://127.0.0.1:[AivisSpeech Engine ã®ãƒãƒ¼ãƒˆç•ªå·]/setting` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€AivisSpeech Engine ã®è¨­å®šç”»é¢ãŒé–‹ãã¾ã™ã€‚  
AivisSpeech Engine ã®ãƒãƒ¼ãƒˆç•ªå·ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `10101` ã§ã™ã€‚

### Q. GPU ãƒ¢ãƒ¼ãƒ‰ (`--use_gpu`) ã«åˆ‡ã‚Šæ›¿ãˆãŸã®ã«éŸ³å£°ç”ŸæˆãŒ CPU ãƒ¢ãƒ¼ãƒ‰ã‚ˆã‚Šã‚‚é…ã„ã§ã™ã€‚

**CPU å†…è”µã® GPU (iGPU) ã®ã¿ã® PC ã§ã‚‚ GPU ãƒ¢ãƒ¼ãƒ‰ã¯ä½¿ãˆã¾ã™ãŒã€ã»ã¨ã‚“ã©ã®å ´åˆ CPU ãƒ¢ãƒ¼ãƒ‰ã‚ˆã‚Šã‹ãªã‚Šé…ããªã£ã¦ã—ã¾ã†ãŸã‚ã€ãŠã™ã™ã‚ã§ãã¾ã›ã‚“ã€‚**

ã“ã‚Œã¯ã€CPU å†…è”µã® GPU ã¯ç‹¬ç«‹ã—ãŸ GPU (dGPU) ã«æ¯”ã¹ã¦æ€§èƒ½ãŒä½ãã€AI éŸ³å£°åˆæˆã®ã‚ˆã†ãªé‡ã„å‡¦ç†ãŒè‹¦æ‰‹ãªãŸã‚ã§ã™ã€‚  
ä¸€æ–¹ã§ã€æœ€è¿‘ã® CPU ã¯æ€§èƒ½ãŒå¤§å¹…ã«å‘ä¸Šã—ã¦ãŠã‚Šã€CPU ã ã‘ã§ã‚‚ååˆ†é«˜é€Ÿã«éŸ³å£°ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚  
ãã®ãŸã‚ã€dGPU éæ­è¼‰ã® PC ã§ã¯ CPU ãƒ¢ãƒ¼ãƒ‰ã®åˆ©ç”¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

### Q. éŸ³å£°ç”Ÿæˆæ™‚ã€Intel ç¬¬ 12 ä¸–ä»£ä»¥é™ã® CPU ã§ãƒ•ãƒ«æ€§èƒ½ã‚’ç™ºæ®ã§ããªã„ã€‚

Intel ã®ç¬¬ 12 ä¸–ä»£ä»¥é™ã® CPUï¼ˆP ã‚³ã‚¢ãƒ»E ã‚³ã‚¢ã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ§‹æˆï¼‰æ­è¼‰ PC ã‚’ãŠä½¿ã„ã®å ´åˆã€Windows ã®é›»æºè¨­å®šã«ã‚ˆã£ã¦éŸ³å£°ç”Ÿæˆã®æ€§èƒ½ãŒå¤§ããå¤‰ã‚ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚  
ã“ã‚Œã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã€Œãƒãƒ©ãƒ³ã‚¹ã€ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€éŸ³å£°ç”Ÿæˆã‚¿ã‚¹ã‚¯ãŒçœé›»åŠ›é‡è¦–ã® E ã‚³ã‚¢ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚„ã™ã„ãŸã‚ã§ã™ã€‚

ä»¥ä¸‹ã®æ‰‹é †ã§è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã¨ã€P ã‚³ã‚¢ã¨ E ã‚³ã‚¢ã®ä¸¡æ–¹ã‚’æœ€å¤§é™æ´»ç”¨ã—ã€éŸ³å£°ç”Ÿæˆã‚’ã‚ˆã‚Šé«˜é€Ÿã«è¡Œãˆã¾ã™ã€‚

1. Windows 11 ã®è¨­å®šã‚’é–‹ã
2. ã‚·ã‚¹ãƒ†ãƒ  â†’ é›»æº ã¨é€²ã‚€
3. ã€Œé›»æºãƒ¢ãƒ¼ãƒ‰ã€ã‚’ã€Œæœ€é©ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã«å¤‰æ›´ã™ã‚‹

â€» ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«å†…ã€Œé›»æºãƒ—ãƒ©ãƒ³ã€ã«ã‚‚ã€Œé«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€è¨­å®šãŒã‚ã‚Šã¾ã™ãŒã€è¨­å®šå†…å®¹ãŒç•°ãªã‚Šã¾ã™ã€‚  
Intel ç¬¬ 12 ä¸–ä»£ä»¥é™ã® CPU ã§ã¯ã€Windows 11 ã®è¨­å®šç”»é¢ã‹ã‚‰ã®ã€Œé›»æºãƒ¢ãƒ¼ãƒ‰ã€ã®å¤‰æ›´ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

### Q. ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè¡¨è¨˜ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ

AivisSpeech ã¯ã€åˆ©ç”¨ç”¨é€”ã‚’æŸç¸›ã•ã‚Œãªã„ã€è‡ªç”±ãª AI éŸ³å£°åˆæˆã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚  
ï¼ˆæˆæœç‰©ã§ä½¿ã£ãŸéŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æ¬¡ç¬¬ã§ã¯ã‚ã‚Šã¾ã™ãŒï¼‰å°‘ãªãã¨ã‚‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢æœ¬ä½“ã¯ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè¡¨è¨˜ä¸è¦ã§ã€å€‹äººãƒ»æ³•äººãƒ»å•†ç”¨ãƒ»éå•†ç”¨ã‚’å•ã‚ãšã€è‡ªç”±ã«ãŠä½¿ã„ã„ãŸã ã‘ã¾ã™ã€‚

â€¦ã¨ã¯ã„ãˆã€ã‚ˆã‚Šå¤šãã®æ–¹ã« AivisSpeech ã®ã“ã¨ã‚’çŸ¥ã£ã¦ã„ãŸã ããŸã„æ°—æŒã¡ã‚‚ã‚ã‚Šã¾ã™ã€‚  
ã‚‚ã—ã‚ˆã‘ã‚Œã°ã€æˆæœç‰©ã®ã©ã“ã‹ã« AivisSpeech ã®ã“ã¨ã‚’ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã—ã¦ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚ï¼ˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã®è¡¨è¨˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ãŠä»»ã›ã—ã¾ã™ã€‚ï¼‰

### Q. AivisSpeech Engine ã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯ã©ã“ã§ç¢ºèªã§ãã¾ã™ã‹ï¼Ÿ

ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚

- **Windows:** `C:\Users\(ãƒ¦ãƒ¼ã‚¶ãƒ¼å)\AppData\Roaming\AivisSpeech-Engine\Logs`
- **Mac:** `~/Library/Application Support/AivisSpeech-Engine/Logs`  
- **Linux:** `~/.local/share/AivisSpeech-Engine/Logs`

### Q. ä¸å…·åˆã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚ã©ã“ã«å ±å‘Šã™ã‚Œã°è‰¯ã„ã§ã™ã‹ï¼Ÿ

ä¸å…·åˆã‚’è¦‹ã¤ã‘ã‚‰ã‚ŒãŸæ–¹ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã§ã”å ±å‘Šãã ã•ã„ã€‚

1. **GitHub Issue (æ¨å¥¨)**  
   GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯ã€[GitHub ã® Issue](https://github.com/Aivis-Project/AivisSpeech-Engine/issues) ã‹ã‚‰ã”å ±å‘Šã„ãŸã ã‘ã¾ã™ã¨ã€æ—©æœŸã®å¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚

2. **Twitter (X)**  
   [Aivis Project å…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ](https://x.com/aivis_project) ã¸ã®ãƒªãƒ—ãƒ©ã‚¤ã‚„ DMã€ã¾ãŸã¯ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚° [#AivisSpeech](https://x.com/search?q=%23AivisSpeech&src=typed_query) ã‚’ä»˜ã‘ãŸãƒ„ã‚¤ãƒ¼ãƒˆã§ã”å ±å‘Šã„ãŸã ã‘ã¾ã™ã€‚

3. **ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ **  
   [Aivis Project ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ](https://docs.google.com/forms/d/e/1FAIpQLSd1gi8lMW1mpdrkCHbM090pWmWhKgz4tR1Obc9G9hOuWpZPsA/viewform) ã‹ã‚‰ã‚‚ã”å ±å‘Šã„ãŸã ã‘ã¾ã™ã€‚

ãªã‚‹ã¹ãä»¥ä¸‹ã®æƒ…å ±ã‚’æ·»ãˆã¦ã”å ±å‘Šã„ãŸã ã‘ã¾ã™ã¨ã€ã‚ˆã‚Šè¿…é€Ÿãªå¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚

- ä¸å…·åˆã®å†…å®¹
- å†ç¾æ‰‹é †ï¼ˆå‹•ç”»ã‚„å†™çœŸãŒã‚ã‚Œã°æ·»ä»˜ã—ã¦ãã ã•ã„ï¼‰
- OS ã®ç¨®é¡ãƒ»AivisSpeech ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- è§£æ±ºã®ãŸã‚ã«è©¦ã•ã‚ŒãŸã“ã¨
- ã‚¦ã‚¤ãƒ«ã‚¹å¯¾ç­–ã‚½ãƒ•ãƒˆãªã©ã®æœ‰ç„¡ï¼ˆé–¢ä¿‚ãŒã‚ã‚Šãã†ã§ã‚ã‚Œã°ï¼‰
- è¡¨ç¤ºã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°

## é–‹ç™ºæ–¹é‡

[VOICEVOX](https://github.com/VOICEVOX) ã¯éå¸¸ã«å·¨å¤§ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã‚ã‚Šã€ç¾åœ¨ã‚‚æ´»ç™ºã«é–‹ç™ºãŒç¶šã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚  
ãã®ãŸã‚ã€AivisSpeech Engine ã§ã¯ VOICEVOX ENGINE ã®æœ€æ–°ç‰ˆã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ä»¥ä¸‹ã®æ–¹é‡ã§é–‹ç™ºã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

- VOICEVOX æœ€æ–°ç‰ˆã¸ã®è¿½å¾“ã‚’å®¹æ˜“ã«ã™ã‚‹ãŸã‚ã€ã§ãã‚‹ã ã‘æ”¹å¤‰ã‚’å¿…è¦æœ€å°é™ã«ç•™ã‚ã‚‹
  - VOICEVOX ENGINE ã‹ã‚‰ AivisSpeech Engine ã¸ã®ãƒªãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã¯å¿…è¦ãªç®‡æ‰€ã®ã¿è¡Œã†
  - `voicevox_engine` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒªãƒãƒ¼ãƒ ã™ã‚‹ã¨ import æ–‡ã®å¤‰æ›´å·®åˆ†ãŒè†¨å¤§ã«ãªã‚‹ãŸã‚ã€ã‚ãˆã¦ãƒªãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡Œã‚ãªã„
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã‚ãªã„
  - VOICEVOX ENGINE ã¨ã®ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒå®¹æ˜“ã«äºˆæƒ³ã•ã‚Œã‚‹ä¸Šã€ã‚³ãƒ¼ãƒ‰å…¨ä½“ã«ç²¾é€šã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ãŸã‚
- AivisSpeech ã§åˆ©ç”¨ã—ãªã„æ©Ÿèƒ½ (æ­Œå£°åˆæˆæ©Ÿèƒ½ãªã©) ã§ã‚ã£ã¦ã‚‚ã€ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤ã¯è¡Œã‚ãªã„
  - ã“ã‚Œã‚‚ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’å›é¿ã™ã‚‹ãŸã‚
  - åˆ©ç”¨ã—ãªã„ã‚³ãƒ¼ãƒ‰ã®ç„¡åŠ¹åŒ–ã¯å‰Šé™¤ã§ã¯ãªãã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã§è¡Œã†
    - VOICEVOX ENGINE ã¨ã®å·®åˆ†ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ãŸã‚ã€å¤§é‡ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆãŒå¿…è¦ãªå ´åˆã¯ã€# ã§ã¯ãªã """ """ ã‚’ä½¿ã†
  - ãŸã ã—ã€Dockerfile ã‚„ GitHub Actions ãªã©ã®æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«é¡ã¯ã“ã®é™ã‚Šã§ã¯ãªã„
    - å…ƒã€… AivisSpeech Engine ã§ã®æ”¹å¤‰é‡ãŒå¤§ãã„éƒ¨åˆ†ã«ã¤ãã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã§ã¯éå¸¸ã«é›‘å¤šãªã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ãŸã‚
- ä¿å®ˆã‚„è¿½å¾“ãŒå›°é›£ãªãŸã‚ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°ã¯è¡Œã‚ãªã„
  - ã“ã®ãŸã‚å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ä¸€åˆ‡æ›´æ–°ã•ã‚Œã¦ãŠã‚‰ãšã€AivisSpeech Engine ã§ã®å¤‰æ›´ã‚’åæ˜ ã—ã¦ã„ãªã„
- AivisSpeech Engine å‘ã‘ã®æ”¹å¤‰ã«ã¨ã‚‚ãªã„ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ç¶­æŒãŒå›°é›£ãªãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®è¿½åŠ ã¯è¡Œã‚ãªã„
  - æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ã¿ã€ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«ä¸€éƒ¨ç®‡æ‰€ã®ä¿®æ­£ã‚„ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è¡Œã„ã€æ¶ˆæ¥µçš„ã«ç¶­æŒã™ã‚‹
    - AivisSpeech Engine ã§ã®æ”¹å¤‰ã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆçµæœã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¯ VOICEVOX ENGINE ã¨ç•°ãªã‚‹
    - AivisSpeech Engine ã§ã®æ”¹å¤‰ã«ã‚ˆã‚Šå‹•ã‹ãªããªã£ãŸãƒ†ã‚¹ãƒˆã®ä¿®æ­£ã¯è¡Œã‚ãšã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã§å¯¾å¿œã™ã‚‹
  - AivisSpeech Engine å‘ã‘ã«æ–°è¦é–‹ç™ºã—ãŸç®‡æ‰€ã¯ã€ä¿å®ˆã‚³ã‚¹ãƒˆã‚’é‘‘ã¿ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ãªã„

## é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰

æ‰‹é †ã¯ã‚ªãƒªã‚¸ãƒŠãƒ«ã® VOICEVOX ENGINE ã¨å¤§å¹…ã«ç•°ãªã‚Šã¾ã™ã€‚  
äº‹å‰ã« Python 3.11 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```bash
# Poetry ã¨ pre-commit ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install poetry poetry-plugin-export pre-commit

# pre-commit ã‚’æœ‰åŠ¹åŒ–
pre-commit install

# ä¾å­˜é–¢ä¿‚ã‚’ã™ã¹ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
poetry install
```

## é–‹ç™º

æ‰‹é †ã¯ã‚ªãƒªã‚¸ãƒŠãƒ«ã® VOICEVOX ENGINE ã¨å¤§å¹…ã«ç•°ãªã‚Šã¾ã™ã€‚

```bash
# é–‹ç™ºç’°å¢ƒã§ AivisSpeech Engine ã‚’èµ·å‹•
poetry run task serve

# AivisSpeech Engine ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º
poetry run task serve --help

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è‡ªå‹•ä¿®æ­£
poetry run task format

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ãƒã‚§ãƒƒã‚¯
poetry run task lint

# typos ã«ã‚ˆã‚‹ã‚¿ã‚¤ãƒãƒã‚§ãƒƒã‚¯
poetry run task typos

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
poetry run task test

# ãƒ†ã‚¹ãƒˆã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’æ›´æ–°
poetry run task update-snapshots

# ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã‚’æ›´æ–°
poetry run task update-licenses

# AivisSpeech Engine ã‚’ãƒ“ãƒ«ãƒ‰
poetry run task build
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ VOICEVOX ENGINE ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ã†ã¡ã€[LGPL-3.0](LICENSE) ã®ã¿ã‚’å˜ç‹¬ã§ç¶™æ‰¿ã—ã¾ã™ã€‚

ä¸‹è¨˜ãªã‚‰ã³ã« [docs/](docs/) ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€[VOICEVOX ENGINE](https://github.com/VOICEVOX/voicevox_engine) æœ¬å®¶ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ”¹å¤‰ãªã—ã§ãã®ã¾ã¾å¼•ãç¶™ã„ã§ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å†…å®¹ãŒ AivisSpeech Engine ã«ã‚‚é€šç”¨ã™ã‚‹ã‹ã¯ä¿è¨¼ã•ã‚Œã¾ã›ã‚“ã€‚

## Special Thanks

AivisSpeech Engine ã¯ã€å¤šãã®ç´ æ™´ã‚‰ã—ã„ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¨ãã®è²¢çŒ®ã«æ·±ãæ”¯ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚  
ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’é–‹ç™ºã—ã¦ãã ã•ã£ãŸå…¨ã¦ã®æ–¹ã€…ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®çš†æ§˜ã®è²¢çŒ®ã¨ã‚µãƒãƒ¼ãƒˆã«ã€å¿ƒã‚ˆã‚Šæ„Ÿè¬ã„ãŸã—ã¾ã™ã€‚

- [@litagin02](https://github.com/litagin02)
- [@Stardust-minus](https://github.com/Stardust-minus)
- [@tuna2134](https://github.com/tuna2134)
- [@googlefan256](https://github.com/googlefan256)
- [@WariHima](https://github.com/WariHima)
- [VOICEVOX ENGINE](https://github.com/VOICEVOX/voicevox_engine) Contributors
- Everyone in [AIå£°ã¥ãã‚ŠæŠ€è¡“ç ”ç©¶ä¼š](https://zenn.dev/p/aivoicelab)

-----

# VOICEVOX ENGINE

[![build](https://github.com/VOICEVOX/voicevox_engine/actions/workflows/build-engine-package.yml/badge.svg)](https://github.com/VOICEVOX/voicevox_engine/actions/workflows/build-engine-package.yml)
[![releases](https://img.shields.io/github/v/release/VOICEVOX/voicevox_engine)](https://github.com/VOICEVOX/voicevox_engine/releases)
[![discord](https://img.shields.io/discord/879570910208733277?color=5865f2&label=&logo=discord&logoColor=ffffff)](https://discord.gg/WMwWetrzuh)

[![test](https://github.com/VOICEVOX/voicevox_engine/actions/workflows/test.yml/badge.svg)](https://github.com/VOICEVOX/voicevox_engine/actions/workflows/test.yml)
[![Coverage Status](https://coveralls.io/repos/github/VOICEVOX/voicevox_engine/badge.svg)](https://coveralls.io/github/VOICEVOX/voicevox_engine)

[![build-docker](https://github.com/VOICEVOX/voicevox_engine/actions/workflows/build-engine-container.yml/badge.svg)](https://github.com/VOICEVOX/voicevox_engine/actions/workflows/build-engine-container.yml)
[![docker](https://img.shields.io/docker/pulls/voicevox/voicevox_engine)](https://hub.docker.com/r/voicevox/voicevox_engine)

[VOICEVOX](https://voicevox.hiroshiba.jp/) ã®ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚  
å®Ÿæ…‹ã¯ HTTP ã‚µãƒ¼ãƒãƒ¼ãªã®ã§ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚Œã°ãƒ†ã‚­ã‚¹ãƒˆéŸ³å£°åˆæˆã§ãã¾ã™ã€‚

ï¼ˆã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã¯ [VOICEVOX](https://github.com/VOICEVOX/voicevox/) ã€
ã‚³ã‚¢ã¯ [VOICEVOX CORE](https://github.com/VOICEVOX/voicevox_core/) ã€
å…¨ä½“æ§‹æˆã¯ [ã“ã¡ã‚‰](https://github.com/VOICEVOX/voicevox/blob/main/docs/%E5%85%A8%E4%BD%93%E6%A7%8B%E6%88%90.md) ã«è©³ç´°ãŒã‚ã‚Šã¾ã™ã€‚ï¼‰

## ç›®æ¬¡

ç›®çš„ã«åˆã‚ã›ãŸã‚¬ã‚¤ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚

- [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](#ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰): éŸ³å£°åˆæˆã‚’ã—ãŸã„æ–¹å‘ã‘
- [è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰](#è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰): ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ãŸã„æ–¹å‘ã‘
- [é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰](#é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰): ã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã—ãŸã„æ–¹å‘ã‘

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰

### ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

[ã“ã¡ã‚‰](https://github.com/VOICEVOX/voicevox_engine/releases/latest)ã‹ã‚‰å¯¾å¿œã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚

### API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

[API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://voicevox.github.io/voicevox_engine/api/)ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

VOICEVOX ã‚¨ãƒ³ã‚¸ãƒ³ã‚‚ã—ãã¯ã‚¨ãƒ‡ã‚£ã‚¿ã‚’èµ·å‹•ã—ãŸçŠ¶æ…‹ã§ http://127.0.0.1:50021/docs ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€èµ·å‹•ä¸­ã®ã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ç¢ºèªã§ãã¾ã™ã€‚  
ä»Šå¾Œã®æ–¹é‡ãªã©ã«ã¤ã„ã¦ã¯ [VOICEVOX éŸ³å£°åˆæˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã®é€£æº](./docs/VOICEVOXéŸ³å£°åˆæˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã®é€£æº.md) ã‚‚å‚è€ƒã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### Docker ã‚¤ãƒ¡ãƒ¼ã‚¸

#### CPU

```bash
docker pull voicevox/voicevox_engine:cpu-latest
docker run --rm -p '127.0.0.1:50021:50021' voicevox/voicevox_engine:cpu-latest
```

#### GPU

```bash
docker pull voicevox/voicevox_engine:nvidia-latest
docker run --rm --gpus all -p '127.0.0.1:50021:50021' voicevox/voicevox_engine:nvidia-latest
```

##### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

GPU ç‰ˆã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã€ç’°å¢ƒã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã€`--runtime=nvidia`ã‚’`docker run`ã«ã¤ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨è§£æ±ºã§ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

### HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§éŸ³å£°åˆæˆã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```bash
echo -n "ã“ã‚“ã«ã¡ã¯ã€éŸ³å£°åˆæˆã®ä¸–ç•Œã¸ã‚ˆã†ã“ã" >text.txt

curl -s \
    -X POST \
    "127.0.0.1:50021/audio_query?speaker=1"\
    --get --data-urlencode text@text.txt \
    > query.json

curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @query.json \
    "127.0.0.1:50021/synthesis?speaker=1" \
    > audio.wav
```

ç”Ÿæˆã•ã‚Œã‚‹éŸ³å£°ã¯ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆãŒ 24000Hz ã¨å°‘ã—ç‰¹æ®ŠãªãŸã‚ã€éŸ³å£°ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ã«ã‚ˆã£ã¦ã¯å†ç”Ÿã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

`speaker` ã«æŒ‡å®šã™ã‚‹å€¤ã¯ `/speakers` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å¾—ã‚‰ã‚Œã‚‹ `style_id` ã§ã™ã€‚äº’æ›æ€§ã®ãŸã‚ã« `speaker` ã¨ã„ã†åå‰ã«ãªã£ã¦ã„ã¾ã™ã€‚

### éŸ³å£°ã‚’èª¿æ•´ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

`/audio_query` ã§å¾—ã‚‰ã‚Œã‚‹éŸ³å£°åˆæˆç”¨ã®ã‚¯ã‚¨ãƒªã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã§ã€éŸ³å£°ã‚’èª¿æ•´ã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€è©±é€Ÿã‚’ 1.5 å€é€Ÿã«ã—ã¦ã¿ã¾ã™ã€‚

```bash
echo -n "ã“ã‚“ã«ã¡ã¯ã€éŸ³å£°åˆæˆã®ä¸–ç•Œã¸ã‚ˆã†ã“ã" >text.txt

curl -s \
    -X POST \
    "127.0.0.1:50021/audio_query?speaker=1" \
    --get --data-urlencode text@text.txt \
    > query.json

# sed ã‚’ä½¿ç”¨ã—ã¦ speedScale ã®å€¤ã‚’ 1.5 ã«å¤‰æ›´
sed -i -r 's/"speedScale":[0-9.]+/"speedScale":1.5/' query.json

curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @query.json \
    "127.0.0.1:50021/synthesis?speaker=1" \
    > audio_fast.wav
```

### èª­ã¿æ–¹ã‚’ AquesTalk é¢¨è¨˜æ³•ã§å–å¾—ãƒ»ä¿®æ­£

#### AquesTalk é¢¨è¨˜æ³•

<!-- NOTE: ã“ã®ç¯€ã¯é™çš„ãƒªãƒ³ã‚¯ã¨ã—ã¦é‹ç”¨ä¸­ãªã®ã§å¤‰æ›´ã—ãªã„æ–¹ãŒè‰¯ã„(voicevox_engine#816) -->

ã€Œ**AquesTalk é¢¨è¨˜æ³•**ã€ã¯ã‚«ã‚¿ã‚«ãƒŠã¨è¨˜å·ã ã‘ã§èª­ã¿æ–¹ã‚’æŒ‡å®šã™ã‚‹è¨˜æ³•ã§ã™ã€‚[AquesTalk æœ¬å®¶ã®è¨˜æ³•](https://www.a-quest.com/archive/manual/siyo_onseikigou.pdf)ã¨ã¯ä¸€éƒ¨ãŒç•°ãªã‚Šã¾ã™ã€‚  
AquesTalk é¢¨è¨˜æ³•ã¯æ¬¡ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã„ã¾ã™ï¼š

- å…¨ã¦ã®ã‚«ãƒŠã¯ã‚«ã‚¿ã‚«ãƒŠã§è¨˜è¿°ã•ã‚Œã‚‹
- ã‚¢ã‚¯ã‚»ãƒ³ãƒˆå¥ã¯ `/` ã¾ãŸã¯ `ã€` ã§åŒºåˆ‡ã‚‹ã€‚ `ã€` ã§åŒºåˆ‡ã£ãŸå ´åˆã«é™ã‚Šç„¡éŸ³åŒºé–“ãŒæŒ¿å…¥ã•ã‚Œã‚‹ã€‚
- ã‚«ãƒŠã®æ‰‹å‰ã« `_` ã‚’å…¥ã‚Œã‚‹ã¨ãã®ã‚«ãƒŠã¯ç„¡å£°åŒ–ã•ã‚Œã‚‹
- ã‚¢ã‚¯ã‚»ãƒ³ãƒˆä½ç½®ã‚’ `'` ã§æŒ‡å®šã™ã‚‹ã€‚å…¨ã¦ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆå¥ã«ã¯ã‚¢ã‚¯ã‚»ãƒ³ãƒˆä½ç½®ã‚’ 1 ã¤æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
- ã‚¢ã‚¯ã‚»ãƒ³ãƒˆå¥æœ«ã« `ï¼Ÿ` (å…¨è§’)ã‚’å…¥ã‚Œã‚‹ã“ã¨ã«ã‚ˆã‚Šç–‘å•æ–‡ã®ç™ºéŸ³ãŒã§ãã‚‹

#### AquesTalk é¢¨è¨˜æ³•ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

`/audio_query`ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã¯ã‚¨ãƒ³ã‚¸ãƒ³ãŒåˆ¤æ–­ã—ãŸèª­ã¿æ–¹ãŒ[AquesTalk é¢¨è¨˜æ³•](#aquestalk-é¢¨è¨˜æ³•)ã§è¨˜è¿°ã•ã‚Œã¾ã™ã€‚  
ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ã§éŸ³å£°ã®èª­ã¿ä»®åã‚„ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚’åˆ¶å¾¡ã§ãã¾ã™ã€‚

```bash
# èª­ã¾ã›ãŸã„æ–‡ç« ã‚’utf-8ã§text.txtã«æ›¸ãå‡ºã™
echo -n "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã¯ä¸‡èƒ½è–¬ã§ã¯ã‚ã‚Šã¾ã›ã‚“" >text.txt

curl -s \
    -X POST \
    "127.0.0.1:50021/audio_query?speaker=1" \
    --get --data-urlencode text@text.txt \
    > query.json

cat query.json | grep -o -E "\"kana\":\".*\""
# çµæœ... "kana":"ãƒ‡ã‚£'ã‚¤ãƒ—/ãƒ©'ã‚¢ãƒ‹ãƒ³ã‚°ãƒ¯/ãƒãƒ³ãƒã‚ªãƒ¤ã‚¯ãƒ‡ãƒ¯ã‚¢ãƒªãƒã‚»'ãƒ³"

# "ãƒ‡ã‚£ã‚¤ãƒ—ãƒ©'ã‚¢ãƒ‹ãƒ³ã‚°ãƒ¯/ãƒãƒ³ãƒ'ã‚ªãƒ¤ã‚¯ãƒ‡ãƒ¯/ã‚¢ãƒªãƒã‚»'ãƒ³"ã¨èª­ã¾ã›ãŸã„ã®ã§ã€
# is_kana=trueã‚’ã¤ã‘ã¦ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–å¾—ã—newphrases.jsonã«ä¿å­˜
echo -n "ãƒ‡ã‚£ã‚¤ãƒ—ãƒ©'ã‚¢ãƒ‹ãƒ³ã‚°ãƒ¯/ãƒãƒ³ãƒ'ã‚ªãƒ¤ã‚¯ãƒ‡ãƒ¯/ã‚¢ãƒªãƒã‚»'ãƒ³" > kana.txt
curl -s \
    -X POST \
    "127.0.0.1:50021/accent_phrases?speaker=1&is_kana=true" \
    --get --data-urlencode text@kana.txt \
    > newphrases.json

# query.jsonã®"accent_phrases"ã®å†…å®¹ã‚’newphrases.jsonã®å†…å®¹ã«ç½®ãæ›ãˆã‚‹
cat query.json | sed -e "s/\[{.*}\]/$(cat newphrases.json)/g" > newquery.json

curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @newquery.json \
    "127.0.0.1:50021/synthesis?speaker=1" \
    > audio.wav
```

### ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸æ©Ÿèƒ½ã«ã¤ã„ã¦

API ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã®å‚ç…§ã€å˜èªã®è¿½åŠ ã€ç·¨é›†ã€å‰Šé™¤ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

#### å‚ç…§

`/user_dict`ã« GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã‚‹ã“ã¨ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```bash
curl -s -X GET "127.0.0.1:50021/user_dict"
```

#### å˜èªè¿½åŠ 

`/user_dict_word`ã« POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã‚‹äº‹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã«å˜èªã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã€ä»¥ä¸‹ãŒå¿…è¦ã§ã™ã€‚

- surface ï¼ˆè¾æ›¸ã«ç™»éŒ²ã™ã‚‹å˜èªï¼‰
- pronunciation ï¼ˆã‚«ã‚¿ã‚«ãƒŠã§ã®èª­ã¿æ–¹ï¼‰
- accent_type ï¼ˆã‚¢ã‚¯ã‚»ãƒ³ãƒˆæ ¸ä½ç½®ã€æ•´æ•°ï¼‰

ã‚¢ã‚¯ã‚»ãƒ³ãƒˆæ ¸ä½ç½®ã«ã¤ã„ã¦ã¯ã€ã“ã¡ã‚‰ã®æ–‡ç« ãŒå‚è€ƒã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚  
ã€‡å‹ã¨ãªã£ã¦ã„ã‚‹æ•°å­—ã®éƒ¨åˆ†ãŒã‚¢ã‚¯ã‚»ãƒ³ãƒˆæ ¸ä½ç½®ã«ãªã‚Šã¾ã™ã€‚  
https://tdmelodic.readthedocs.io/ja/latest/pages/introduction.html

æˆåŠŸã—ãŸå ´åˆã®è¿”ã‚Šå€¤ã¯å˜èªã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ UUID ã®æ–‡å­—åˆ—ã«ãªã‚Šã¾ã™ã€‚

```bash
surface="test"
pronunciation="ãƒ†ã‚¹ãƒˆ"
accent_type="1"

curl -s -X POST "127.0.0.1:50021/user_dict_word" \
    --get \
    --data-urlencode "surface=$surface" \
    --data-urlencode "pronunciation=$pronunciation" \
    --data-urlencode "accent_type=$accent_type"
```

#### å˜èªä¿®æ­£

`/user_dict_word/{word_uuid}`ã« PUT ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã‚‹äº‹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã®å˜èªã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã€ä»¥ä¸‹ãŒå¿…è¦ã§ã™ã€‚

- surface ï¼ˆè¾æ›¸ã«ç™»éŒ²ã™ã‚‹ãƒ¯ãƒ¼ãƒ‰ï¼‰
- pronunciation ï¼ˆã‚«ã‚¿ã‚«ãƒŠã§ã®èª­ã¿æ–¹ï¼‰
- accent_type ï¼ˆã‚¢ã‚¯ã‚»ãƒ³ãƒˆæ ¸ä½ç½®ã€æ•´æ•°ï¼‰

word_uuid ã¯å˜èªè¿½åŠ æ™‚ã«ç¢ºèªã§ãã‚‹ã»ã‹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã§ã‚‚ç¢ºèªã§ãã¾ã™ã€‚  
æˆåŠŸã—ãŸå ´åˆã®è¿”ã‚Šå€¤ã¯`204 No Content`ã«ãªã‚Šã¾ã™ã€‚

```bash
surface="test2"
pronunciation="ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼"
accent_type="2"
# ç’°å¢ƒã«ã‚ˆã£ã¦word_uuidã¯é©å®œæ›¸ãæ›ãˆã¦ãã ã•ã„
word_uuid="cce59b5f-86ab-42b9-bb75-9fd3407f1e2d"

curl -s -X PUT "127.0.0.1:50021/user_dict_word/$word_uuid" \
    --get \
    --data-urlencode "surface=$surface" \
    --data-urlencode "pronunciation=$pronunciation" \
    --data-urlencode "accent_type=$accent_type"
```

#### å˜èªå‰Šé™¤

`/user_dict_word/{word_uuid}`ã« DELETE ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã‚‹äº‹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã®å˜èªã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

word_uuid ã¯å˜èªè¿½åŠ æ™‚ã«ç¢ºèªã§ãã‚‹ã»ã‹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã§ã‚‚ç¢ºèªã§ãã¾ã™ã€‚  
æˆåŠŸã—ãŸå ´åˆã®è¿”ã‚Šå€¤ã¯`204 No Content`ã«ãªã‚Šã¾ã™ã€‚

```bash
# ç’°å¢ƒã«ã‚ˆã£ã¦word_uuidã¯é©å®œæ›¸ãæ›ãˆã¦ãã ã•ã„
word_uuid="cce59b5f-86ab-42b9-bb75-9fd3407f1e2d"

curl -s -X DELETE "127.0.0.1:50021/user_dict_word/$word_uuid"
```

#### è¾æ›¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ&ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

ã‚¨ãƒ³ã‚¸ãƒ³ã®[è¨­å®šãƒšãƒ¼ã‚¸](http://127.0.0.1:50021/setting)å†…ã®ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ&ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€ç¯€ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ&ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå¯èƒ½ã§ã™ã€‚

ä»–ã«ã‚‚ API ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è¾æ›¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ&ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå¯èƒ½ã§ã™ã€‚  
ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã¯ `POST /import_user_dict`ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«ã¯ `GET /user_dict` ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚  
å¼•æ•°ç­‰ã®è©³ç´°ã¯ API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”è¦§ãã ã•ã„ã€‚

### ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã«ã¤ã„ã¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹`presets.yaml`ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã§ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚„è©±é€Ÿãªã©ã®ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```bash
echo -n "ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ã†ã¾ãæ´»ç”¨ã™ã‚Œã°ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£é–“ã§åŒã˜è¨­å®šã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™" >text.txt

# ãƒ—ãƒªã‚»ãƒƒãƒˆæƒ…å ±ã‚’å–å¾—
curl -s -X GET "127.0.0.1:50021/presets" > presets.json

preset_id=$(cat presets.json | sed -r 's/^.+"id"\:\s?([0-9]+?).+$/\1/g')
style_id=$(cat presets.json | sed -r 's/^.+"style_id"\:\s?([0-9]+?).+$/\1/g')

# éŸ³å£°åˆæˆç”¨ã®ã‚¯ã‚¨ãƒªã‚’å–å¾—
curl -s \
    -X POST \
    "127.0.0.1:50021/audio_query_from_preset?preset_id=$preset_id"\
    --get --data-urlencode text@text.txt \
    > query.json

# éŸ³å£°åˆæˆ
curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @query.json \
    "127.0.0.1:50021/synthesis?speaker=$style_id" \
    > audio.wav
```

- `speaker_uuid`ã¯ã€`/speakers`ã§ç¢ºèªã§ãã¾ã™
- `id`ã¯é‡è¤‡ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“
- ã‚¨ãƒ³ã‚¸ãƒ³èµ·å‹•å¾Œã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã‚‹ã¨ã‚¨ãƒ³ã‚¸ãƒ³ã«åæ˜ ã•ã‚Œã¾ã™

### 2 ç¨®é¡ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

`/synthesis_morphing`ã§ã¯ã€2 ç¨®é¡ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§ãã‚Œãã‚Œåˆæˆã•ã‚ŒãŸéŸ³å£°ã‚’å…ƒã«ã€ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã—ãŸéŸ³å£°ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```bash
echo -n "ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ï¼’ç¨®é¡ã®å£°ã‚’æ··ãœã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚" > text.txt

curl -s \
    -X POST \
    "127.0.0.1:50021/audio_query?speaker=8"\
    --get --data-urlencode text@text.txt \
    > query.json

# å…ƒã®ã‚¹ã‚¿ã‚¤ãƒ«ã§ã®åˆæˆçµæœ
curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @query.json \
    "127.0.0.1:50021/synthesis?speaker=8" \
    > audio.wav

export MORPH_RATE=0.5

# ã‚¹ã‚¿ã‚¤ãƒ«2ç¨®é¡åˆ†ã®éŸ³å£°åˆæˆ+WORLDã«ã‚ˆã‚‹éŸ³å£°åˆ†æãŒå…¥ã‚‹ãŸã‚æ™‚é–“ãŒæ›ã‹ã‚‹ã®ã§æ³¨æ„
curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @query.json \
    "127.0.0.1:50021/synthesis_morphing?base_speaker=8&target_speaker=10&morph_rate=$MORPH_RATE" \
    > audio.wav

export MORPH_RATE=0.9

# queryã€base_speakerã€target_speakerãŒåŒã˜å ´åˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒä½¿ç”¨ã•ã‚Œã‚‹ãŸã‚æ¯”è¼ƒçš„é«˜é€Ÿã«ç”Ÿæˆã•ã‚Œã‚‹
curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @query.json \
    "127.0.0.1:50021/synthesis_morphing?base_speaker=8&target_speaker=10&morph_rate=$MORPH_RATE" \
    > audio.wav
```

### ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®è¿½åŠ æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

è¿½åŠ æƒ…å ±ã®ä¸­ã® portrait.png ã‚’å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚  
ï¼ˆ[jq](https://stedolan.github.io/jq/)ã‚’ä½¿ç”¨ã—ã¦ json ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã„ã¾ã™ã€‚ï¼‰

```bash
curl -s -X GET "127.0.0.1:50021/speaker_info?speaker_uuid=7ffcb7ce-00ec-4bdc-82cd-45a8889e43ff" \
    | jq  -r ".portrait" \
    | base64 -d \
    > portrait.png
```

### ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½ãªéŸ³å£°åˆæˆ

`/cancellable_synthesis`ã§ã¯é€šä¿¡ã‚’åˆ‡æ–­ã—ãŸå ´åˆã«å³åº§ã«è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ãŒé–‹æ”¾ã•ã‚Œã¾ã™ã€‚  
(`/synthesis`ã§ã¯é€šä¿¡ã‚’åˆ‡æ–­ã—ã¦ã‚‚æœ€å¾Œã¾ã§éŸ³å£°åˆæˆã®è¨ˆç®—ãŒè¡Œã‚ã‚Œã¾ã™)  
ã“ã® API ã¯å®Ÿé¨“çš„æ©Ÿèƒ½ã§ã‚ã‚Šã€ã‚¨ãƒ³ã‚¸ãƒ³èµ·å‹•æ™‚ã«å¼•æ•°ã§`--enable_cancellable_synthesis`ã‚’æŒ‡å®šã—ãªã„ã¨æœ‰åŠ¹åŒ–ã•ã‚Œã¾ã›ã‚“ã€‚  
éŸ³å£°åˆæˆã«å¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯`/synthesis`ã¨åŒæ§˜ã§ã™ã€‚

### HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§æ­Œå£°åˆæˆã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```bash
echo -n '{
  "notes": [
    { "key": null, "frame_length": 15, "lyric": "" },
    { "key": 60, "frame_length": 45, "lyric": "ãƒ‰" },
    { "key": 62, "frame_length": 45, "lyric": "ãƒ¬" },
    { "key": 64, "frame_length": 45, "lyric": "ãƒŸ" },
    { "key": null, "frame_length": 15, "lyric": "" }
  ]
}' > score.json

curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @score.json \
    "127.0.0.1:50021/sing_frame_audio_query?speaker=6000" \
    > query.json

curl -s \
    -H "Content-Type: application/json" \
    -X POST \
    -d @query.json \
    "127.0.0.1:50021/frame_synthesis?speaker=3001" \
    > audio.wav
```

æ¥½è­œã®`key`ã¯ MIDI ç•ªå·ã§ã™ã€‚  
`lyric`ã¯æ­Œè©ã§ã€ä»»æ„ã®æ–‡å­—åˆ—ã‚’æŒ‡å®šã§ãã¾ã™ãŒã€ã‚¨ãƒ³ã‚¸ãƒ³ã«ã‚ˆã£ã¦ã¯ã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠï¼‘ãƒ¢ãƒ¼ãƒ©ä»¥å¤–ã®æ–‡å­—åˆ—ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚  
ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ 93.75Hz ã§ã€ã‚¨ãƒ³ã‚¸ãƒ³ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®`frame_rate`ã§å–å¾—ã§ãã¾ã™ã€‚  
ï¼‘ã¤ç›®ã®ãƒãƒ¼ãƒˆã¯ç„¡éŸ³ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

`/sing_frame_audio_query`ã§æŒ‡å®šã§ãã‚‹`speaker`ã¯ã€`/singers`ã§å–å¾—ã§ãã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã®å†…ã€ç¨®é¡ãŒ`sing`ã‹`singing_teacher`ãªã‚¹ã‚¿ã‚¤ãƒ«ã®`style_id`ã§ã™ã€‚  
`/frame_synthesis`ã§æŒ‡å®šã§ãã‚‹`speaker`ã¯ã€`/singers`ã§å–å¾—ã§ãã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã®å†…ã€ç¨®é¡ãŒ`frame_decode`ã®`style_id`ã§ã™ã€‚  
å¼•æ•°ãŒ `speaker` ã¨ã„ã†åå‰ã«ãªã£ã¦ã„ã‚‹ã®ã¯ã€ä»–ã® API ã¨ä¸€è²«æ€§ã‚’ã‚‚ãŸã›ã‚‹ãŸã‚ã§ã™ã€‚

`/sing_frame_audio_query`ã¨`/frame_synthesis`ã«ç•°ãªã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

### CORS è¨­å®š

VOICEVOX ã§ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿è­·ã®ãŸã‚`localhost`ãƒ»`127.0.0.1`ãƒ»`app://`ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µ URIãƒ»Origin ãªã—ä»¥å¤–ã® Origin ã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å…¥ã‚Œãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãã®ãŸã‚ã€ä¸€éƒ¨ã®ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¢ãƒ—ãƒªã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ã‘å–ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚  
ã“ã‚Œã‚’å›é¿ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ã‚¨ãƒ³ã‚¸ãƒ³ã‹ã‚‰è¨­å®šã§ãã‚‹ UI ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚

#### è¨­å®šæ–¹æ³•

1. <http://127.0.0.1:50021/setting> ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
2. åˆ©ç”¨ã™ã‚‹ã‚¢ãƒ—ãƒªã«åˆã‚ã›ã¦è¨­å®šã‚’å¤‰æ›´ã€è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
3. ä¿å­˜ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€å¤‰æ›´ã‚’ç¢ºå®šã—ã¦ãã ã•ã„ã€‚
4. è¨­å®šã®é©ç”¨ã«ã¯ã‚¨ãƒ³ã‚¸ãƒ³ã®å†èµ·å‹•ãŒå¿…è¦ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦å†èµ·å‹•ã‚’ã—ã¦ãã ã•ã„ã€‚

### ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ API ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹

å®Ÿè¡Œæ™‚å¼•æ•°`--disable_mutable_api`ã‹ç’°å¢ƒå¤‰æ•°`VV_DISABLE_MUTABLE_API=1`ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ³ã‚¸ãƒ³ã®è¨­å®šã‚„è¾æ›¸ãªã©ã‚’å¤‰æ›´ã™ã‚‹ API ã‚’ç„¡åŠ¹ã«ã§ãã¾ã™ã€‚

### æ–‡å­—ã‚³ãƒ¼ãƒ‰

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯ã™ã¹ã¦ UTF-8 ã§ã™ã€‚

### ãã®ä»–ã®å¼•æ•°

ã‚¨ãƒ³ã‚¸ãƒ³èµ·å‹•æ™‚ã«å¼•æ•°ã‚’æŒ‡å®šã§ãã¾ã™ã€‚è©³ã—ã„ã“ã¨ã¯`-h`å¼•æ•°ã§ãƒ˜ãƒ«ãƒ—ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```bash
$ python run.py -h

usage: run.py [-h] [--host HOST] [--port PORT] [--use_gpu] [--voicevox_dir VOICEVOX_DIR] [--voicelib_dir VOICELIB_DIR] [--runtime_dir RUNTIME_DIR] [--enable_mock] [--enable_cancellable_synthesis]
              [--init_processes INIT_PROCESSES] [--load_all_models] [--cpu_num_threads CPU_NUM_THREADS] [--output_log_utf8] [--cors_policy_mode {CorsPolicyMode.all,CorsPolicyMode.localapps}]
              [--allow_origin [ALLOW_ORIGIN ...]] [--setting_file SETTING_FILE] [--preset_file PRESET_FILE] [--disable_mutable_api]

VOICEVOX ã®ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚

options:
  -h, --help            show this help message and exit
  --host HOST           æ¥ç¶šã‚’å—ã‘ä»˜ã‘ã‚‹ãƒ›ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚
  --port PORT           æ¥ç¶šã‚’å—ã‘ä»˜ã‘ã‚‹ãƒãƒ¼ãƒˆç•ªå·ã§ã™ã€‚
  --use_gpu             GPUã‚’ä½¿ã£ã¦éŸ³å£°åˆæˆã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
  --voicevox_dir VOICEVOX_DIR
                        VOICEVOXã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã§ã™ã€‚
  --voicelib_dir VOICELIB_DIR
                        VOICEVOX COREã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã§ã™ã€‚
  --runtime_dir RUNTIME_DIR
                        VOICEVOX COREã§ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã§ã™ã€‚
  --enable_mock         VOICEVOX COREã‚’ä½¿ã‚ãšãƒ¢ãƒƒã‚¯ã§éŸ³å£°åˆæˆã‚’è¡Œã„ã¾ã™ã€‚
  --enable_cancellable_synthesis
                        éŸ³å£°åˆæˆã‚’é€”ä¸­ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
  --init_processes INIT_PROCESSES
                        cancellable_synthesisæ©Ÿèƒ½ã®åˆæœŸåŒ–æ™‚ã«ç”Ÿæˆã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹æ•°ã§ã™ã€‚
  --load_all_models     èµ·å‹•æ™‚ã«å…¨ã¦ã®éŸ³å£°åˆæˆãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
  --cpu_num_threads CPU_NUM_THREADS
                        éŸ³å£°åˆæˆã‚’è¡Œã†ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ã§ã™ã€‚æŒ‡å®šã—ãªã„å ´åˆã€ä»£ã‚ã‚Šã«ç’°å¢ƒå¤‰æ•° VV_CPU_NUM_THREADS ã®å€¤ãŒä½¿ã‚ã‚Œã¾ã™ã€‚VV_CPU_NUM_THREADS ãŒç©ºæ–‡å­—åˆ—ã§ãªãæ•°å€¤ã§ã‚‚ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼çµ‚äº†ã—ã¾ã™ã€‚
  --output_log_utf8     ãƒ­ã‚°å‡ºåŠ›ã‚’UTF-8ã§ãŠã“ãªã„ã¾ã™ã€‚æŒ‡å®šã—ãªã„å ´åˆã€ä»£ã‚ã‚Šã«ç’°å¢ƒå¤‰æ•° VV_OUTPUT_LOG_UTF8 ã®å€¤ãŒä½¿ã‚ã‚Œã¾ã™ã€‚VV_OUTPUT_LOG_UTF8 ã®å€¤ãŒ1ã®å ´åˆã¯UTF-8ã§ã€0ã¾ãŸã¯ç©ºæ–‡å­—ã€å€¤ãŒãªã„å ´åˆã¯ç’°å¢ƒã«ã‚ˆã£ã¦è‡ªå‹•çš„ã«æ±ºå®šã•ã‚Œã¾ã™ã€‚
  --cors_policy_mode {CorsPolicyMode.all,CorsPolicyMode.localapps}
                        CORSã®è¨±å¯ãƒ¢ãƒ¼ãƒ‰ã€‚allã¾ãŸã¯localappsãŒæŒ‡å®šã§ãã¾ã™ã€‚allã¯ã™ã¹ã¦ã‚’è¨±å¯ã—ã¾ã™ã€‚localappsã¯ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰ãƒãƒªã‚·ãƒ¼ã‚’ã€app://.ã¨localhosté–¢é€£ã«é™å®šã—ã¾ã™ã€‚ãã®ä»–ã®ã‚ªãƒªã‚¸ãƒ³ã¯allow_originã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¿½åŠ ã§ãã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯localappsã€‚ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯--
                        setting_fileã§æŒ‡å®šã•ã‚Œã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚ˆã‚Šã‚‚å„ªå…ˆã•ã‚Œã¾ã™ã€‚
  --allow_origin [ALLOW_ORIGIN ...]
                        è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã‚¹ãƒšãƒ¼ã‚¹ã§åŒºåˆ‡ã‚‹ã“ã¨ã§è¤‡æ•°æŒ‡å®šã§ãã¾ã™ã€‚ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯--setting_fileã§æŒ‡å®šã•ã‚Œã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚ˆã‚Šã‚‚å„ªå…ˆã•ã‚Œã¾ã™ã€‚
  --setting_file SETTING_FILE
                        è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã¾ã™ã€‚
  --preset_file PRESET_FILE
                        ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã¾ã™ã€‚æŒ‡å®šãŒãªã„å ´åˆã€ç’°å¢ƒå¤‰æ•° VV_PRESET_FILEã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®presets.yamlã‚’é †ã«æ¢ã—ã¾ã™ã€‚
  --disable_mutable_api
                        è¾æ›¸ç™»éŒ²ã‚„è¨­å®šå¤‰æ›´ãªã©ã€ã‚¨ãƒ³ã‚¸ãƒ³ã®é™çš„ãªãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹APIã‚’ç„¡åŠ¹åŒ–ã—ã¾ã™ã€‚æŒ‡å®šã—ãªã„å ´åˆã€ä»£ã‚ã‚Šã«ç’°å¢ƒå¤‰æ•° VV_DISABLE_MUTABLE_API ã®å€¤ãŒä½¿ã‚ã‚Œã¾ã™ã€‚VV_DISABLE_MUTABLE_API ã®å€¤ãŒ1ã®å ´åˆã¯ç„¡åŠ¹åŒ–ã§ã€0ã¾ãŸã¯ç©ºæ–‡å­—ã€å€¤ãŒãªã„å ´åˆã¯ç„¡è¦–ã•ã‚Œã¾ã™ã€‚
```

### ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

ã‚¨ãƒ³ã‚¸ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨ã¦æ¶ˆå»ã—ã€æ–°ã—ã„ã‚‚ã®ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

## è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰

VOICEVOX ENGINE ã¯çš†ã•ã‚“ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ï¼  
è©³ç´°ã¯ [CONTRIBUTING.md](./CONTRIBUTING.md) ã‚’ã”è¦§ãã ã•ã„ã€‚  
ã¾ãŸ [VOICEVOX éå…¬å¼ Discord ã‚µãƒ¼ãƒãƒ¼](https://discord.gg/WMwWetrzuh)ã«ã¦ã€é–‹ç™ºã®è­°è«–ã‚„é›‘è«‡ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚æ°—è»½ã«ã”å‚åŠ ãã ã•ã„ã€‚

ãªãŠã€Issue ã‚’è§£æ±ºã™ã‚‹ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã•ã‚Œã‚‹éš›ã¯ã€åˆ¥ã®æ–¹ã¨åŒã˜ Issue ã«å–ã‚Šçµ„ã‚€ã“ã¨ã‚’é¿ã‘ã‚‹ãŸã‚ã€Issue å´ã§å–ã‚Šçµ„ã¿å§‹ã‚ãŸã“ã¨ã‚’ä¼ãˆã‚‹ã‹ã€æœ€åˆã« Draft ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

## é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰

### ç’°å¢ƒæ§‹ç¯‰

`Python 3.11.9` ã‚’ç”¨ã„ã¦é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€å„ OS ã”ã¨ã® C/C++ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã€CMake ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

```bash
# å®Ÿè¡Œç’°å¢ƒã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
python -m pip install -r requirements.txt

# é–‹ç™ºç’°å¢ƒãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒãƒ»ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
python -m pip install -r requirements-dev.txt -r requirements-build.txt
```

### å®Ÿè¡Œ

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®è©³ç´°ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```bash
python run.py --help
```

```bash
# è£½å“ç‰ˆ VOICEVOX ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
VOICEVOX_DIR="C:/path/to/VOICEVOX/vv-engine" # è£½å“ç‰ˆ VOICEVOX ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã® ENGINE ã®ãƒ‘ã‚¹
python run.py --voicevox_dir=$VOICEVOX_DIR
```

<!-- å·®ã—æ›¿ãˆå¯èƒ½ãªéŸ³å£°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ãŸã¯ãã®ä»•æ§˜ãŒå…¬é–‹ã•ã‚ŒãŸã‚‰ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã™
```bash
# éŸ³å£°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å·®ã—æ›¿ãˆã‚‹
VOICELIB_DIR="C:/path/to/your/tts-model"
python run.py --voicevox_dir=$VOICEVOX_DIR --voicelib_dir=$VOICELIB_DIR
```
-->

```bash
# ãƒ¢ãƒƒã‚¯ã§ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
python run.py --enable_mock
```

```bash
# ãƒ­ã‚°ã‚’UTF8ã«å¤‰æ›´
python run.py --output_log_utf8
# ã‚‚ã—ãã¯ VV_OUTPUT_LOG_UTF8=1 python run.py
```

#### CPU ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ã‚’æŒ‡å®šã™ã‚‹

CPU ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ãŒæœªæŒ‡å®šã®å ´åˆã¯ã€è«–ç†ã‚³ã‚¢æ•°ã®åŠåˆ†ãŒä½¿ã‚ã‚Œã¾ã™ã€‚ï¼ˆæ®†ã©ã® CPU ã§ã€ã“ã‚Œã¯å…¨ä½“ã®å‡¦ç†èƒ½åŠ›ã®åŠåˆ†ã§ã™ï¼‰  
ã‚‚ã— IaaS ä¸Šã§å®Ÿè¡Œã—ã¦ã„ãŸã‚Šã€å°‚ç”¨ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆãªã©ã€  
ã‚¨ãƒ³ã‚¸ãƒ³ãŒä½¿ã†å‡¦ç†èƒ½åŠ›ã‚’èª¿ç¯€ã—ãŸã„å ´åˆã¯ã€CPU ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§å®Ÿç¾ã§ãã¾ã™ã€‚

- å®Ÿè¡Œæ™‚å¼•æ•°ã§æŒ‡å®šã™ã‚‹
  ```bash
  python run.py --voicevox_dir=$VOICEVOX_DIR --cpu_num_threads=4
  ```
- ç’°å¢ƒå¤‰æ•°ã§æŒ‡å®šã™ã‚‹
  ```bash
  export VV_CPU_NUM_THREADS=4
  python run.py --voicevox_dir=$VOICEVOX_DIR
  ```

#### éå»ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ã‚¢ã‚’ä½¿ã†

VOICEVOX Core 0.5.4 ä»¥é™ã®ã‚³ã‚¢ã‚’ä½¿ç”¨ã™ã‚‹äº‹ãŒå¯èƒ½ã§ã™ã€‚  
Mac ã§ã® libtorch ç‰ˆã‚³ã‚¢ã®ã‚µãƒãƒ¼ãƒˆã¯ã—ã¦ã„ã¾ã›ã‚“ã€‚

##### éå»ã®ãƒã‚¤ãƒŠãƒªã‚’æŒ‡å®šã™ã‚‹

è£½å“ç‰ˆ VOICEVOX ã‚‚ã—ãã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿ã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’`--voicevox_dir`å¼•æ•°ã§æŒ‡å®šã™ã‚‹ã¨ã€ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ã‚¢ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```bash
python run.py --voicevox_dir="/path/to/VOICEVOX/vv-engine"
```

Mac ã§ã¯ã€`DYLD_LIBRARY_PATH`ã®æŒ‡å®šãŒå¿…è¦ã§ã™ã€‚

```bash
DYLD_LIBRARY_PATH="/path/to/voicevox" python run.py --voicevox_dir="/path/to/VOICEVOX/vv-engine"
```

##### éŸ³å£°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç›´æ¥æŒ‡å®šã™ã‚‹

[VOICEVOX Core ã® zip ãƒ•ã‚¡ã‚¤ãƒ«](https://github.com/VOICEVOX/voicevox_core/releases)ã‚’è§£å‡ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’`--voicelib_dir`å¼•æ•°ã§æŒ‡å®šã—ã¾ã™ã€‚  
ã¾ãŸã€ã‚³ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆã‚ã›ã¦ã€[libtorch](https://pytorch.org/)ã‚„[onnxruntime](https://github.com/microsoft/onnxruntime) (å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’`--runtime_dir`å¼•æ•°ã§æŒ‡å®šã—ã¾ã™ã€‚  
ãŸã ã—ã€ã‚·ã‚¹ãƒ†ãƒ ã®æ¢ç´¢ãƒ‘ã‚¹ä¸Šã« libtorchã€onnxruntime ãŒã‚ã‚‹å ´åˆã€`--runtime_dir`å¼•æ•°ã®æŒ‡å®šã¯ä¸è¦ã§ã™ã€‚  
`--voicelib_dir`å¼•æ•°ã€`--runtime_dir`å¼•æ•°ã¯è¤‡æ•°å›ä½¿ç”¨å¯èƒ½ã§ã™ã€‚  
API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã‚³ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯`core_version`å¼•æ•°ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚ï¼ˆæœªæŒ‡å®šã®å ´åˆã¯æœ€æ–°ã®ã‚³ã‚¢ãŒä½¿ç”¨ã•ã‚Œã¾ã™ï¼‰

```bash
python run.py --voicelib_dir="/path/to/voicevox_core" --runtime_dir="/path/to/libtorch_or_onnx"
```

Mac ã§ã¯ã€`--runtime_dir`å¼•æ•°ã®ä»£ã‚ã‚Šã«`DYLD_LIBRARY_PATH`ã®æŒ‡å®šãŒå¿…è¦ã§ã™ã€‚

```bash
DYLD_LIBRARY_PATH="/path/to/onnx" python run.py --voicelib_dir="/path/to/voicevox_core"
```

##### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã™ã‚‹

ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹éŸ³å£°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚

- ãƒ“ãƒ«ãƒ‰ç‰ˆ: `<user_data_dir>/voicevox-engine/core_libraries/`
- Python ç‰ˆ: `<user_data_dir>/voicevox-engine-dev/core_libraries/`

`<user_data_dir>`ã¯ OS ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚

- Windows: `C:\Users\<username>\AppData\Local\`
- macOS: `/Users/<username>/Library/Application\ Support/`
- Linux: `/home/<username>/.local/share/`

### ãƒ“ãƒ«ãƒ‰

`pyinstaller` ã‚’ç”¨ã„ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã¨ Dockerfile ã‚’ç”¨ã„ãŸã‚³ãƒ³ãƒ†ãƒŠåŒ–ã«ã‚ˆã‚Šãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãŒå¯èƒ½ã§ã™ã€‚  
æ‰‹é †ã®è©³ç´°ã¯ [è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰#ãƒ“ãƒ«ãƒ‰](./CONTRIBUTING.md#ãƒ“ãƒ«ãƒ‰) ã‚’å¾¡è¦§ãã ã•ã„ã€‚

GitHub ã‚’ç”¨ã„ã‚‹å ´åˆã€fork ã—ãŸãƒªãƒã‚¸ãƒˆãƒªã§ GitHub Actions ã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰ãŒå¯èƒ½ã§ã™ã€‚  
Actions ã‚’ ON ã«ã—ã€workflow_dispatch ã§`build-engine-package.yml`ã‚’èµ·å‹•ã™ã‚Œã°ãƒ“ãƒ«ãƒ‰ã§ãã¾ã™ã€‚
æˆæœç‰©ã¯ Release ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚
ãƒ“ãƒ«ãƒ‰ã«å¿…è¦ãª GitHub Actions ã®è¨­å®šã¯ [è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰#GitHub Actions](./CONTRIBUTING.md#github-actions) ã‚’å¾¡è¦§ãã ã•ã„ã€‚

### ãƒ†ã‚¹ãƒˆãƒ»é™çš„è§£æ

`pytest` ã‚’ç”¨ã„ãŸãƒ†ã‚¹ãƒˆã¨å„ç¨®ãƒªãƒ³ã‚¿ãƒ¼ã‚’ç”¨ã„ãŸé™çš„è§£æãŒå¯èƒ½ã§ã™ã€‚  
æ‰‹é †ã®è©³ç´°ã¯ [è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰#ãƒ†ã‚¹ãƒˆ](./CONTRIBUTING.md#ãƒ†ã‚¹ãƒˆ), [è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰#é™çš„è§£æ](./CONTRIBUTING.md#é™çš„è§£æ) ã‚’å¾¡è¦§ãã ã•ã„ã€‚

### ä¾å­˜é–¢ä¿‚

ä¾å­˜é–¢ä¿‚ã¯ `poetry` ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€å°å…¥å¯èƒ½ãªä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ä¸Šã®åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ã€‚  
è©³ç´°ã¯ [è²¢çŒ®è€…ã‚¬ã‚¤ãƒ‰#ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](./CONTRIBUTING.md#ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸) ã‚’å¾¡è¦§ãã ã•ã„ã€‚

### ãƒãƒ«ãƒã‚¨ãƒ³ã‚¸ãƒ³æ©Ÿèƒ½ã«é–¢ã—ã¦

VOICEVOX ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã¯ã€è¤‡æ•°ã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åŒæ™‚ã«èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€è‡ªä½œã®éŸ³å£°åˆæˆã‚¨ãƒ³ã‚¸ãƒ³ã‚„æ—¢å­˜ã®éŸ³å£°åˆæˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’ VOICEVOX ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ä¸Šã§å‹•ã‹ã™ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

<img src="./docs/res/ãƒãƒ«ãƒã‚¨ãƒ³ã‚¸ãƒ³æ¦‚å¿µå›³.svg" width="320">

<details>

#### ãƒãƒ«ãƒã‚¨ãƒ³ã‚¸ãƒ³æ©Ÿèƒ½ã®ä»•çµ„ã¿

VOICEVOX API ã«æº–æ‹ ã—ãŸè¤‡æ•°ã®ã‚¨ãƒ³ã‚¸ãƒ³ã® Web API ã‚’ãƒãƒ¼ãƒˆã‚’åˆ†ã‘ã¦èµ·å‹•ã—ã€çµ±ä¸€çš„ã«æ‰±ã†ã“ã¨ã§ãƒãƒ«ãƒã‚¨ãƒ³ã‚¸ãƒ³æ©Ÿèƒ½ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒãã‚Œãã‚Œã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’å®Ÿè¡Œãƒã‚¤ãƒŠãƒªçµŒç”±ã§èµ·å‹•ã—ã€EngineID ã¨çµã³ã¤ã‘ã¦è¨­å®šã‚„çŠ¶æ…‹ã‚’å€‹åˆ¥ç®¡ç†ã—ã¾ã™ã€‚

#### ãƒãƒ«ãƒã‚¨ãƒ³ã‚¸ãƒ³æ©Ÿèƒ½ã¸ã®å¯¾å¿œæ–¹æ³•

VOICEVOX API æº–æ‹ ã‚¨ãƒ³ã‚¸ãƒ³ã‚’èµ·å‹•ã™ã‚‹å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã‚’ä½œã‚‹ã“ã¨ã§å¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚
VOICEVOX ENGINE ãƒªãƒã‚¸ãƒˆãƒªã‚’ fork ã—ã€ä¸€éƒ¨ã®æ©Ÿèƒ½ã‚’æ”¹é€ ã™ã‚‹ã®ãŒç°¡å˜ã§ã™ã€‚

æ”¹é€ ã™ã¹ãç‚¹ã¯ã‚¨ãƒ³ã‚¸ãƒ³æƒ…å ±ãƒ»ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±ãƒ»éŸ³å£°åˆæˆã®ï¼“ç‚¹ã§ã™ã€‚

ã‚¨ãƒ³ã‚¸ãƒ³ã®æƒ…å ±ã¯ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`engine_manifest.json`ï¼‰ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã®å½¢å¼ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ VOICEVOX API æº–æ‹ ã‚¨ãƒ³ã‚¸ãƒ³ã«å¿…é ˆã§ã™ã€‚
ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã®æƒ…å ±ã‚’è¦‹ã¦é©å®œå¤‰æ›´ã—ã¦ãã ã•ã„ã€‚
éŸ³å£°åˆæˆæ‰‹æ³•ã«ã‚ˆã£ã¦ã¯ã€ä¾‹ãˆã°ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°æ©Ÿèƒ½ãªã©ã€VOICEVOX ã¨åŒã˜æ©Ÿèƒ½ã‚’æŒã¤ã“ã¨ãŒã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
ãã®å ´åˆã¯ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã®`supported_features`å†…ã®æƒ…å ±ã‚’é©å®œå¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±ã¯`resources/character_info`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚
ãƒ€ãƒŸãƒ¼ã®ã‚¢ã‚¤ã‚³ãƒ³ãªã©ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§é©å®œå¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

éŸ³å£°åˆæˆã¯`voicevox_engine/tts_pipeline/tts_engine.py`ã§è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚
VOICEVOX API ã§ã®éŸ³å£°åˆæˆã¯ã€ã‚¨ãƒ³ã‚¸ãƒ³å´ã§éŸ³å£°åˆæˆç”¨ã®ã‚¯ã‚¨ãƒª `AudioQuery` ã®åˆæœŸå€¤ã‚’ä½œæˆã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¿”ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¿…è¦ã«å¿œã˜ã¦ã‚¯ã‚¨ãƒªã‚’ç·¨é›†ã—ãŸã‚ã¨ã€ã‚¨ãƒ³ã‚¸ãƒ³ãŒã‚¯ã‚¨ãƒªã«å¾“ã£ã¦éŸ³å£°åˆæˆã™ã‚‹ã“ã¨ã§å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
ã‚¯ã‚¨ãƒªä½œæˆã¯`/audio_query`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã€éŸ³å£°åˆæˆã¯`/synthesis`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§è¡Œã£ã¦ãŠã‚Šã€æœ€ä½ã“ã®ï¼’ã¤ã«å¯¾å¿œã™ã‚Œã° VOICEVOX API ã«æº–æ‹ ã—ãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚

#### ãƒãƒ«ãƒã‚¨ãƒ³ã‚¸ãƒ³æ©Ÿèƒ½å¯¾å¿œã‚¨ãƒ³ã‚¸ãƒ³ã®é…å¸ƒæ–¹æ³•

VVPP ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦é…å¸ƒã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚
VVPP ã¯ã€ŒVOICEVOX ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã®ç•¥ã§ã€ä¸­èº«ã¯ãƒ“ãƒ«ãƒ‰ã—ãŸã‚¨ãƒ³ã‚¸ãƒ³ãªã©ã‚’å«ã‚“ã ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® Zip ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
æ‹¡å¼µå­ã‚’`.vvpp`ã«ã™ã‚‹ã¨ã€ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§ VOICEVOX ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼å´ã¯å—ã‘å–ã£ãŸ VVPP ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã« Zip å±•é–‹ã—ãŸã‚ã¨ã€ãƒ«ãƒ¼ãƒˆã®ç›´ä¸‹ã«ã‚ã‚‹`engine_manifest.json`ã«å¾“ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢æŸ»ã—ã¾ã™ã€‚
VOICEVOX ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«ã†ã¾ãèª­ã¿è¾¼ã¾ã›ã‚‰ã‚Œãªã„ã¨ãã¯ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ã¾ãŸã€`xxx.vvpp`ã¯åˆ†å‰²ã—ã¦é€£ç•ªã‚’ä»˜ã‘ãŸ`xxx.0.vvppp`ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦é…å¸ƒã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚
ã“ã‚Œã¯ãƒ•ã‚¡ã‚¤ãƒ«å®¹é‡ãŒå¤§ããã¦é…å¸ƒãŒå›°é›£ãªå ´åˆã«æœ‰ç”¨ã§ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¿…è¦ãª`vvpp`ãŠã‚ˆã³`vvppp`ãƒ•ã‚¡ã‚¤ãƒ«ã¯`vvpp.txt`ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã€‚

</details>

## äº‹ä¾‹ç´¹ä»‹

**[voicevox-client](https://github.com/voicevox-client) [@voicevox-client](https://github.com/voicevox-client)** ï½¥ï½¥ï½¥ VOICEVOX ENGINE ã®å„è¨€èªå‘ã‘ API ãƒ©ãƒƒãƒ‘ãƒ¼

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

LGPL v3 ã¨ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å…¬é–‹ãŒä¸è¦ãªåˆ¥ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã™ã€‚
åˆ¥ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚’å–å¾—ã—ãŸã„å ´åˆã¯ã€ãƒ’ãƒ›ã«æ±‚ã‚ã¦ãã ã•ã„ã€‚  
X ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ: [@hiho_karuta](https://x.com/hiho_karuta)
